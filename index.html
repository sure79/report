<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìš´ì„¸ ë¶„ì„ ì„¼í„° - í•´ìš´ë²ˆí˜¸ ê·¸ë˜í”„ & ì‚¬ì£¼ë²ˆí˜¸ ë‹¤ê°í˜•</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* í–‰ìš´ ë¶„ì„ ì¶”ê°€ ìŠ¤íƒ€ì¼ */
        .fortune-analysis-section {
            margin-top: 40px;
            display: none;
        }
        
        .fortune-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.03);
            position: relative;
            overflow: hidden;
        }
        
        .fortune-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #FF6B9D, #48CFCB, #FE5757);
        }
        
        .fortune-card-title {
            font-size: 24px;
            font-weight: 700;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .fortune-card-title::before {
            content: '';
            width: 6px;
            height: 25px;
            background: linear-gradient(135deg, #FF6B9D, #48CFCB);
            border-radius: 3px;
        }
        
        .fortune-lucky-numbers {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .fortune-number-item {
            background: linear-gradient(135deg, #FF6B9D, #48CFCB);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: 600;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }
        
        .fortune-number-item:hover {
            transform: scale(1.1) rotate(3deg);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        .fortune-color-section {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .fortune-color-item {
            padding: 20px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 16px;
            color: white;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
            text-align: center;
        }
        
        .fortune-color-item:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .fortune-chosung-section {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #f0f9ff, #f5f5ff);
            border-radius: 15px;
            border: 2px solid rgba(72, 207, 203, 0.2);
        }
        
        .fortune-chosung-item {
            background: linear-gradient(135deg, #48CFCB, #26A69A);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 18px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(72, 207, 203, 0.4);
            transition: all 0.3s;
        }
        
        .fortune-chosung-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 18px rgba(72, 207, 203, 0.5);
        }
        
        .fortune-chosung-label {
            font-size: 16px;
            color: #334155;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .fortune-region-container {
            margin-top: 20px;
        }
        
        .fortune-region-category {
            margin-bottom: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #fafbfc, #ffffff);
            border-radius: 15px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .fortune-region-category-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
            padding-left: 12px;
            border-left: 3px solid #48CFCB;
        }
        
        .fortune-region-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
        }
        
        .fortune-region-item {
            background: linear-gradient(135deg, #ffffff, #f8faff);
            padding: 10px 15px;
            border-radius: 12px;
            border: 2px solid transparent;
            transition: all 0.3s;
            text-align: center;
            font-weight: 500;
            font-size: 13px;
            cursor: pointer;
        }
        
        .fortune-region-item:hover {
            border-color: #48CFCB;
            background: linear-gradient(135deg, #e6fffa, #f0fdfa);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(72, 207, 203, 0.25);
        }
        
        .fortune-special-region {
            background: linear-gradient(135deg, #fff4e6, #fffbf0);
            border-color: #fbbf24;
        }
        
        .fortune-special-region:hover {
            border-color: #f59e0b;
            background: linear-gradient(135deg, #fef3c7, #fffbeb);
            box-shadow: 0 6px 15px rgba(251, 191, 36, 0.3);
        }
        
        .fortune-warning-text {
            background: linear-gradient(135deg, #fff8e1, #fff3cd);
            color: #7c5e10;
            padding: 15px;
            border-radius: 12px;
            margin-top: 20px;
            font-size: 14px;
            border: 1px solid #ffd960;
            box-shadow: 0 3px 8px rgba(255, 217, 96, 0.2);
        }
        
        .fortune-description-text {
            color: #64748b;
            margin: 15px 0;
            font-size: 14px;
            line-height: 1.6;
        }
        
        /* ìƒí™œë³„ ì¶”ì²œì‹œê¸° ìŠ¤íƒ€ì¼ */
        .life-recommendations-content {
            display: grid;
            gap: 30px;
            margin-top: 30px;
        }
        
        .life-category {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }
        
        .life-category::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #FF6B9D, #48CFCB, #FE5757);
        }
        
        .life-category-title {
            font-size: 24px;
            font-weight: 700;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .life-category-title::before {
            content: '';
            width: 6px;
            height: 30px;
            background: linear-gradient(135deg, #FF6B9D, #48CFCB);
            border-radius: 3px;
        }
        
        .timing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .timing-item {
            background: linear-gradient(135deg, #f8faff, #ffffff);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .timing-item.excellent {
            border-color: #10b981;
            background: linear-gradient(135deg, #ecfdf5, #f0fdf4);
        }
        
        .timing-item.good {
            border-color: #3b82f6;
            background: linear-gradient(135deg, #eff6ff, #f0f9ff);
        }
        
        .timing-item.caution {
            border-color: #f59e0b;
            background: linear-gradient(135deg, #fffbeb, #fefce8);
        }
        
        .timing-item.avoid {
            border-color: #ef4444;
            background: linear-gradient(135deg, #fef2f2, #fef7f7);
        }
        
        .timing-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .timing-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .timing-badge.excellent {
            background: #10b981;
            color: white;
        }
        
        .timing-badge.good {
            background: #3b82f6;
            color: white;
        }
        
        .timing-badge.caution {
            background: #f59e0b;
            color: white;
        }
        
        .timing-badge.avoid {
            background: #ef4444;
            color: white;
        }
        
        .timing-year {
            font-size: 18px;
            font-weight: 700;
            color: #333;
            margin-bottom: 8px;
        }
        
        .timing-score {
            font-size: 14px;
            color: #666;
            margin-bottom: 12px;
        }
        
        .timing-reason {
            font-size: 14px;
            color: #555;
            line-height: 1.5;
        }
        
        .timing-summary {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid rgba(59, 130, 246, 0.2);
        }
        
        .timing-summary h4 {
            color: #1e40af;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .timing-summary p {
            color: #334155;
            line-height: 1.6;
            margin: 0;
        }
        
        body {
            font-family: 'Noto Sans KR', 'Malgun Gothic', sans-serif;
            background: #ffffff !important;
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }


        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: #ffffff !important;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.1),
                0 4px 8px rgba(0, 0, 0, 0.05);
            border: 1px solid #e9ecef;
            position: relative;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);
        }
        
        .header {
            background: #ffffff !important;
            color: #333333 !important;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .header h1 {
            font-size: 2.8em;
            margin-bottom: 15px;
            font-weight: 900;
            letter-spacing: -1px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.95;
            font-weight: 400;
        }

        /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
        .tab-navigation {
            display: flex;
            justify-content: center;
            gap: 0;
            margin-top: 30px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            background: #f8f9fa;
        }

        .tab-button {
            padding: 15px 35px;
            background: #f8f9fa;
            color: #666666;
            border: 2px solid #e9ecef;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            flex: 1;
            max-width: 200px;
        }

        .tab-button.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .tab-button:hover:not(.active) {
            background: #e9ecef;
            color: #333333;
            border-color: #dee2e6;
        }
        
        .input-section {
            padding: 30px;
            background: #ffffff;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .input-form {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .input-group label {
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }
        
        .haeun-input {
            padding: 12px 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 18px;
            text-align: center;
            width: 120px;
            transition: all 0.3s ease;
        }
        
        .haeun-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.2);
        }
        
        .generate-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 25px;
        }
        
        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .result-section {
            padding: 30px;
            display: none;
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .summary-card {
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            color: white;
            font-weight: bold;
        }
        
        .card-best {
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }
        
        .card-avg {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
        }
        
        .card-caution {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
        }
        
        .chart-container {
            position: relative;
            height: 500px;
            margin-bottom: 30px;
            background: white;
            border-radius: 15px;
            padding: 20px;
        }
        
        .details-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #e9ecef;
        }
        
        .year-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        /* í•´ìš´ í’€ì´ ìŠ¤íƒ€ì¼ */
        .copy-section {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }
        
        .copy-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 15px;
        }
        
        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }
        
        .copy-status {
            color: #28a745;
            font-weight: 600;
            background: rgba(40, 167, 69, 0.1);
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid #28a745;
        }
        
        .haeun-text-content {
            background: #ffffff;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 30px;
            font-family: 'Noto Sans KR', sans-serif;
            line-height: 1.6;
            color: #333;
            max-height: 600px;
            overflow-y: auto;
        }
        
        .document-title {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }
        
        .document-title h3 {
            color: #333;
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .document-subtitle {
            color: #666;
            font-size: 14px;
        }
        
        .year-fortune-section {
            margin-bottom: 40px;
        }
        
        .year-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .year-header h4 {
            margin: 0 0 8px 0;
            font-size: 20px;
        }
        
        .year-summary {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .haeun-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 20px;
        }
        
        .haeun-block {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .haeun-block h5 {
            color: #333;
            margin: 0 0 10px 0;
            font-size: 16px;
        }
        
        .haeun-meaning {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
            font-style: italic;
        }
        
        .general-info, .fortune-detail, .advice-detail {
            margin-bottom: 15px;
            padding: 10px 0;
        }
        
        .general-info strong, .fortune-detail strong, .advice-detail strong {
            color: #333;
            display: block;
            margin-bottom: 5px;
        }
        
        .fortune-detail em {
            color: #666;
            font-size: 13px;
        }
        
        .no-detail {
            color: #999;
            font-style: italic;
            padding: 10px;
            text-align: center;
        }
        
        .year-divider {
            text-align: center;
            color: #ccc;
            margin: 30px 0;
            font-family: monospace;
        }
        
        @media (max-width: 768px) {
            .haeun-details {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .haeun-text-content {
                padding: 20px;
            }
            
            .document-title h3 {
                font-size: 24px;
            }
        }
        .haeun-detail-section {
            background: white !important;
            border: 1px solid #e1e5e9 !important;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
        }

        .haeun-detail-content {
            display: grid;
            gap: 25px;
        }

        .haeun-overview {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
        }

        .haeun-overview h4 {
            margin: 0 0 10px 0;
            font-size: 1.3em;
            font-weight: 600;
        }

        .haeun-overview .meaning {
            font-size: 1.1em;
            margin-bottom: 15px;
            opacity: 0.95;
        }

        .haeun-overview .general {
            font-size: 1em;
            line-height: 1.6;
            opacity: 0.9;
        }

        .fortune-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .fortune-card {
            background: white !important;
            border: 1px solid #e1e5e9 !important;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .fortune-card h5 {
            margin: 0 0 15px 0;
            font-size: 1.1em;
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .fortune-card .content {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .fortune-card .example {
            background: #f8f9fa !important;
            border-left: 4px solid #007bff;
            padding: 12px 15px;
            margin: 15px 0;
            font-style: italic;
            color: #666;
            border-radius: 0 8px 8px 0;
        }

        .fortune-card .warning {
            background: #fff3cd !important;
            border-left: 4px solid #ffc107;
            padding: 12px 15px;
            margin: 15px 0;
            color: #856404;
            border-radius: 0 8px 8px 0;
        }

        .advice-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .advice-card {
            background: white !important;
            border: 1px solid #e1e5e9 !important;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .advice-card h5 {
            margin: 0 0 15px 0;
            font-size: 1.1em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .todo-card h5 {
            color: #28a745;
        }

        .caution-card h5 {
            color: #dc3545;
        }

        .advice-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .advice-list li {
            padding: 10px 0;
            border-bottom: 1px solid #f1f3f4;
            line-height: 1.5;
            color: #555;
        }

        .advice-list li:last-child {
            border-bottom: none;
        }

        .advice-list li:before {
            content: "âœ“ ";
            color: #28a745;
            font-weight: bold;
            margin-right: 8px;
        }

        .caution-card .advice-list li:before {
            content: "âš  ";
            color: #dc3545;
        }
        
        .year-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #f0f0f0;
            transition: all 0.3s ease;
        }
        
        .year-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .year-card.peak {
            border-color: #ffd700;
            background: linear-gradient(135deg, #fff9c4, #ffeaa7);
        }
        
        .year-card.reset {
            border-color: #74b9ff;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
        }
        
        .score-high { color: #4caf50; font-weight: bold; }
        .score-medium { color: #ff9800; font-weight: bold; }
        .score-low { color: #f44336; font-weight: bold; }
        
        .example-section {
            padding: 20px;
            background: #fff;
            margin-top: 20px;
            border-radius: 10px;
        }
        
        .example-btn {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            color: #1976d2;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .example-btn:hover {
            background: #2196f3;
            color: white;
        }

        .error-message {
            color: #f44336;
            background: #ffebee;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            display: none;
        }

        /* íƒ­ ì»¨í…ì¸  */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* ì‚¬ì£¼ë²ˆí˜¸ ë¶„ì„ ìŠ¤íƒ€ì¼ */
        .saju-container {
            padding: 50px;
            text-align: center;
        }

        .saju-title {
            font-size: 2.5em;
            color: #1a1a2e;
            margin-bottom: 40px;
            font-weight: 900;
            letter-spacing: -1px;
            background: linear-gradient(135deg, #FF6B9D 0%, #48CFCB 50%, #FE5757 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .saju-input-container {
            display: flex;
            gap: 25px;
            margin-bottom: 50px;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
        }

        .saju-input-group {
            display: flex;
            align-items: center;
            gap: 15px;
            background: linear-gradient(135deg, #f8faff, #ffffff);
            padding: 20px 30px;
            border-radius: 25px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            box-shadow: 
                0 10px 25px rgba(0, 0, 0, 0.05),
                inset 0 1px 2px rgba(255, 255, 255, 0.9);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .saju-input-group:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.12),
                0 0 0 1px rgba(72, 207, 203, 0.3);
        }

        .saju-input {
            padding: 18px 20px;
            border: 2px solid #e8ecf5;
            background: #ffffff;
            border-radius: 18px;
            font-size: 24px;
            width: 85px;
            text-align: center;
            color: #1a1a2e;
            font-weight: 700;
            transition: all 0.3s;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.04);
            -webkit-appearance: none;
            -moz-appearance: textfield;
            appearance: none;
        }

        .saju-input::-webkit-outer-spin-button,
        .saju-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .saju-input:focus {
            outline: none;
            border-color: #48CFCB;
            background: #f0ffff;
            box-shadow: 
                0 0 0 4px rgba(72, 207, 203, 0.2),
                inset 0 2px 4px rgba(0, 0, 0, 0.02);
            transform: scale(1.05);
        }

        .saju-button {
            padding: 20px 50px;
            background: linear-gradient(135deg, #FF6B9D, #FE5757);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 10px 30px rgba(255, 107, 157, 0.4),
                inset 0 1px 2px rgba(255, 255, 255, 0.3);
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .saju-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .saju-button:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 15px 40px rgba(255, 107, 157, 0.5),
                inset 0 1px 2px rgba(255, 255, 255, 0.4);
            background: linear-gradient(135deg, #FF7FA7, #FE6868);
        }

        .saju-button:hover::before {
            left: 100%;
        }

        .saju-chart-container {
            position: relative;
            width: 100%;
            height: 500px;
            margin: 50px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #f8fafff0, #ffffff);
            border-radius: 30px;
            box-shadow: 
                inset 0 4px 12px rgba(0, 0, 0, 0.05),
                0 2px 8px rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.03);
            overflow: hidden;
        }

        .saju-chart-container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #FF6B9D, #48CFCB, #FE5757);
            border-radius: 30px;
            opacity: 0.1;
            z-index: -1;
        }

        .saju-result-text {
            text-align: center;
            margin-top: 40px;
            font-size: 36px;
            color: #1a1a2e;
            font-weight: 900;
            letter-spacing: -1px;
        }

        .saju-result-text span {
            background: linear-gradient(135deg, #FF6B9D, #48CFCB);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 48px;
        }

        .saju-stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .saju-stat-item {
            background: linear-gradient(135deg, #ffffff, #f8faff);
            border: 1px solid rgba(0, 0, 0, 0.04);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .saju-stat-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #FF6B9D, #48CFCB);
            transform: scaleX(0);
            transition: transform 0.4s;
        }

        .saju-stat-item:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.1),
                0 5px 15px rgba(0, 0, 0, 0.08);
            border-color: rgba(72, 207, 203, 0.3);
        }

        .saju-stat-item:hover::before {
            transform: scaleX(1);
        }

        .saju-stat-label {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 10px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .saju-stat-value {
            font-size: 32px;
            font-weight: 900;
            background: linear-gradient(135deg, #FF6B9D, #48CFCB);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .slash {
            font-size: 28px;
            color: #cbd5e0;
            margin: 0 8px;
            font-weight: 300;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”® ìš´ì„¸ ë¶„ì„ ì„¼í„°</h1>
            <p>í•´ìš´ë²ˆí˜¸ 10ë…„ ê·¸ë˜í”„ì™€ ì‚¬ì£¼ë²ˆí˜¸ ë‹¤ê°í˜• ë¶„ì„ì„ í•œë²ˆì—!</p>
            <div class="tab-navigation">
                <button class="tab-button active" onclick="showTab('haeun')">í•´ìš´ë²ˆí˜¸ ê·¸ë˜í”„</button>
                <button class="tab-button" onclick="showTab('saju')">ì‚¬ì£¼ë²ˆí˜¸ ë‹¤ê°í˜•</button>
            </div>
        </div>
        
        <!-- í•´ìš´ë²ˆí˜¸ íƒ­ -->
        <div id="haeun-tab" class="tab-content active">
            <div class="input-section">
                <div class="input-form">
                    <div class="input-group">
                        <label for="haeun1">ì²« ë²ˆì§¸ í•´ìš´ë²ˆí˜¸</label>
                        <input type="text" id="haeun1" class="haeun-input" placeholder="ì˜ˆ: 9/16" maxlength="5">
                    </div>
                    
                    <div style="font-size: 24px; color: #667eea; font-weight: bold;">+</div>
                    
                    <div class="input-group">
                        <label for="haeun2">ë‘ ë²ˆì§¸ í•´ìš´ë²ˆí˜¸</label>
                        <input type="text" id="haeun2" class="haeun-input" placeholder="ì˜ˆ: 5/11" maxlength="5">
                    </div>
                    
                    <button class="generate-btn" onclick="generateGraph()">
                        ğŸ“Š ê·¸ë˜í”„ ìƒì„±í•˜ê¸°
                    </button>
                </div>
                
                <div class="error-message" id="errorMessage"></div>
                
                <div class="example-section">
                    <h4>ğŸ“‹ ì˜ˆì‹œ í•´ìš´ë²ˆí˜¸ (í´ë¦­í•˜ë©´ ìë™ ì…ë ¥)</h4>
                    <button class="example-btn" onclick="setExample('9/16', '5/11')">9/16 + 5/11</button>
                    <button class="example-btn" onclick="setExample('7/13', '3/8')">7/13 + 3/8</button>
                    <button class="example-btn" onclick="setExample('1/7', '6/12')">1/7 + 6/12</button>
                    <button class="example-btn" onclick="setExample('4/10', '8/14')">4/10 + 8/14</button>
                    <button class="example-btn" onclick="setExample('2/9', '0/6')">2/9 + 0/6</button>
                </div>
            </div>
            
            <div class="result-section" id="resultSection">
                <div class="summary-cards">
                    <div class="summary-card card-best">
                        <h3>ğŸŒŸ ìµœê³  ìš´ì„¸</h3>
                        <div id="bestYear"></div>
                    </div>
                    <div class="summary-card card-avg">
                        <h3>ğŸ“ˆ í‰ê·  ì ìˆ˜</h3>
                        <div id="avgScore"></div>
                    </div>
                    <div class="summary-card card-caution">
                        <h3>âš ï¸ ì£¼ì˜ ì‹œê¸°</h3>
                        <div id="cautionYear"></div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="haeunChart"></canvas>
                </div>
                
                <div class="details-section">
                    <h3>ğŸ“… ì—°ë„ë³„ ìƒì„¸ ë¶„ì„</h3>
                    <div id="yearDetails" class="year-grid"></div>
                </div>

                <!-- í•´ìš´ í’€ì´ ì„¹ì…˜ -->
                <div class="haeun-detail-section" id="haeunDetailSection" style="display: none;">
                    <h3>ğŸ”® í•´ìš´ë²ˆí˜¸ ìƒì„¸ í’€ì´</h3>
                    <div id="haeunDetailContent" class="haeun-detail-content"></div>
                </div>
            </div>
        </div>

        <!-- ì‚¬ì£¼ë²ˆí˜¸ íƒ­ -->
        <div id="saju-tab" class="tab-content">
            <div class="saju-container">
                <h2 class="saju-title">ì‚¬ì£¼ë²ˆí˜¸ ë‹¤ê°í˜• ë¶„ì„</h2>
                <div class="saju-input-container">
                    <div class="saju-input-group">
                        <input type="text" id="num1" class="saju-input" placeholder="20" value="20">
                        <span class="slash">,</span>
                        <input type="text" id="num2" class="saju-input" placeholder="4" value="4">
                    </div>
                    <span class="slash">/</span>
                    <div class="saju-input-group">
                        <input type="text" id="num3" class="saju-input" placeholder="8" value="8">
                        <span class="slash">,</span>
                        <input type="text" id="num4" class="saju-input" placeholder="10" value="10">
                    </div>
                    <button class="saju-button" onclick="generateSajuChart()">ë¶„ì„í•˜ê¸°</button>
                </div>
                <div class="saju-chart-container">
                    <canvas id="radarChart" width="500" height="500"></canvas>
                </div>
                <div class="saju-result-text" id="resultText"></div>
                <div class="saju-stats-container" id="statsContainer"></div>
                
                <!-- í–‰ìš´ ë¶„ì„ ì„¹ì…˜ ì¶”ê°€ -->
                <div class="fortune-analysis-section" id="fortuneAnalysisSection">
                    <div class="copy-section">
                        <button class="copy-btn" onclick="copySajuFortuneText()">ğŸ“‹ í–‰ìš´ ë¶„ì„ í…ìŠ¤íŠ¸ ë³µì‚¬</button>
                        <div class="copy-status" id="sajuFortuneCopyStatus" style="display: none;">ë³µì‚¬ ì™„ë£Œ! âœ…</div>
                    </div>
                    <div class="fortune-card">
                        <h3 class="fortune-card-title">ğŸ° í–‰ìš´ì˜ ìˆ«ì</h3>
                        <div class="fortune-lucky-numbers" id="fortuneLuckyNumbers"></div>
                        <p class="fortune-description-text" id="fortuneNumberDescription"></p>
                    </div>

                    <div class="fortune-card">
                        <h3 class="fortune-card-title">ğŸ¨ í–‰ìš´ì˜ ìƒ‰ìƒ</h3>
                        <div class="fortune-color-section" id="fortuneColorSection"></div>
                        <p class="fortune-description-text" id="fortuneColorDescription"></p>
                    </div>

                    <div class="fortune-card">
                        <h3 class="fortune-card-title">ğŸ“ ì¶”ì²œ ì§€ì—­</h3>
                        <div class="fortune-chosung-label">ë‹¹ì‹ ì˜ ì‚¬ì£¼ë²ˆí˜¸ì™€ ì¡°í™”ë¥¼ ì´ë£¨ëŠ” ì´ˆì„±:</div>
                        <div class="fortune-chosung-section" id="fortuneChosungSection"></div>
                        <p class="fortune-description-text" id="fortuneRegionDescription"></p>
                        <div class="fortune-region-container" id="fortuneRegionContainer"></div>
                        <div class="fortune-warning-text">
                            ğŸ’¡ ì§€ì—­ ì¶”ì²œì€ ì‚¬ì£¼ë²ˆí˜¸ì˜ ê¸°ìš´ê³¼ ì§€ì—­ëª…ì˜ ì´ˆì„±ì´ ì¡°í™”ë¥¼ ì´ë£¨ëŠ” ê³³ë“¤ì…ë‹ˆë‹¤.<br>
                            íŠ¹ë³„íˆ "ë¬¼"ê³¼ ê´€ë ¨ëœ ì§€ì—­(ê°•, í•´, í˜¸ìˆ˜ ë“±)ê³¼ "ì¤‘ì•™" ì§€ì—­ì€ íŠ¹ë³„í•œ ê¸°ìš´ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ìƒí™œë³„ ì¶”ì²œì‹œê¸° ì„¹ì…˜ -->
        <div class="haeun-section" id="lifeRecommendationSection" style="display: none;">
            <div class="section-header">
                <h3 class="section-title">ğŸ“… ìƒí™œë³„ ì¶”ì²œì‹œê¸° ê°€ì´ë“œ</h3>
                <p class="section-description">10ë…„ê°„ í•´ìš´ íë¦„ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ìµœì ì˜ ì‹œê¸° ë¶„ì„</p>
            </div>
            <div class="copy-section">
                <button class="copy-btn" onclick="copyLifeRecommendationText()">ğŸ“‹ ìƒí™œë³„ ì¶”ì²œì‹œê¸° í…ìŠ¤íŠ¸ ë³µì‚¬</button>
                <div class="copy-status" id="lifeCopyStatus" style="display: none;">ë³µì‚¬ ì™„ë£Œ! âœ…</div>
            </div>
            <div class="life-recommendations-content" id="lifeRecommendationsContent"></div>
        </div>
    </div>

    <!-- í•´ìš´ ë°ì´í„° íŒŒì¼ -->
    <script src="haeun-data.js"></script>
    
    <script>

        let currentChart = null;

        // í•´ìš´ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬
        function validateHaeun(haeun) {
            const pattern = /^\d{1,2}\/\d{1,2}$/;
            if (!pattern.test(haeun)) return false;
            
            const [num, den] = haeun.split('/').map(Number);
            return num >= 0 && num <= 9 && den >= 5 && den <= 17;
        }

        // ì˜ˆì‹œ ì„¤ì •
        function setExample(haeun1, haeun2) {
            document.getElementById('haeun1').value = haeun1;
            document.getElementById('haeun2').value = haeun2;
        }

        // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 3000);
        }

        // ìƒí™œë³„ ì¶”ì²œì‹œê¸° í…ìŠ¤íŠ¸ ë³µì‚¬ í•¨ìˆ˜
        function copyLifeRecommendationText() {
            const content = document.getElementById('lifeRecommendationsContent');
            if (!content || content.innerHTML === '') {
                alert('ìƒí™œë³„ ì¶”ì²œì‹œê¸° ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € í•´ìš´ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ê³  ê·¸ë˜í”„ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // í…ìŠ¤íŠ¸ í˜•íƒœë¡œ ë³€í™˜
            let text = generateLifeRecommendationText();
            
            // í´ë¦½ë³´ë“œì— ë³µì‚¬
            navigator.clipboard.writeText(text).then(() => {
                // ë³µì‚¬ ì™„ë£Œ ë©”ì‹œì§€ í‘œì‹œ
                const status = document.getElementById('lifeCopyStatus');
                status.style.display = 'inline-block';
                setTimeout(() => {
                    status.style.display = 'none';
                }, 2000);
            }).catch(err => {
                // ë³µì‚¬ ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ ë°©ë²•
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                const status = document.getElementById('lifeCopyStatus');
                status.style.display = 'inline-block';
                setTimeout(() => {
                    status.style.display = 'none';
                }, 2000);
            });
        }

        // ìƒí™œë³„ ì¶”ì²œì‹œê¸° í…ìŠ¤íŠ¸ ìƒì„± í•¨ìˆ˜
        function generateLifeRecommendationText() {
            const haeun1 = document.getElementById('haeun1').value.trim();
            const haeun2 = document.getElementById('haeun2').value.trim();
            const currentDate = new Date().toLocaleDateString('ko-KR');
            
            // 10ë…„ê°„ ë°ì´í„° ì¬ìƒì„± (ë³µì‚¬ìš©)
            const yearDetails = [];
            for (let i = 0; i < 10; i++) {
                const year = 2025 + i;
                const calculatedHaeun1 = calculateHaeun(haeun1, i);
                const calculatedHaeun2 = calculateHaeun(haeun2, i);
                const score1 = getScore(calculatedHaeun1);
                const score2 = getScore(calculatedHaeun2);
                const combinedScore = Math.round((score1 + score2) / 2);
                
                yearDetails.push({
                    year: year,
                    haeun1: calculatedHaeun1,
                    haeun2: calculatedHaeun2,
                    score1: score1,
                    score2: score2,
                    combinedScore: combinedScore,
                    meaning1: getMeaning(calculatedHaeun1),
                    meaning2: getMeaning(calculatedHaeun2)
                });
            }
            
            let text = `ğŸ“… ìƒí™œë³„ ì¶”ì²œì‹œê¸° ê°€ì´ë“œ
ìƒì„±ì¼: ${currentDate}
ì…ë ¥ í•´ìš´ë²ˆí˜¸: ${haeun1} / ${haeun2}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

`;

            // ìƒí™œ ë¶„ì•¼ë³„ ë¶„ì„
            const categories = [
                { id: 'business', title: 'ğŸ’¼ ì‚¬ì—…/ì°½ì—…', description: 'ìƒˆë¡œìš´ ì‚¬ì—… ì‹œì‘ì´ë‚˜ ì‚¬ì—… í™•ì¥ì— ì í•©í•œ ì‹œê¸°' },
                { id: 'investment', title: 'ğŸ’° íˆ¬ì/ì¬í…Œí¬', description: 'íˆ¬ì ê²°ì •ì´ë‚˜ ì¬ì • ê´€ë¦¬ì— ìœ ë¦¬í•œ ì‹œê¸°' },
                { id: 'marriage', title: 'ğŸ’’ ê²°í˜¼/ì—°ì• ', description: 'ê²°í˜¼ì´ë‚˜ ì¤‘ìš”í•œ ì—°ì•  ê²°ì •ì— ì¢‹ì€ ì‹œê¸°' },
                { id: 'moving', title: 'ğŸ  ì´ì‚¬/ì´ì§', description: 'ê±°ì£¼ì§€ ë³€ê²½ì´ë‚˜ ì§ì¥ ì´ë™ì— ì í•©í•œ ì‹œê¸°' },
                { id: 'study', title: 'ğŸ“š í•™ìŠµ/ìê¸°ê³„ë°œ', description: 'ìƒˆë¡œìš´ ê³µë¶€ë‚˜ ê¸°ìˆ  ìŠµë“ì— ì§‘ì¤‘í•˜ê¸° ì¢‹ì€ ì‹œê¸°' },
                { id: 'health', title: 'ğŸ¥ ê±´ê°•ê´€ë¦¬', description: 'ê±´ê°• ì ê²€ì´ë‚˜ ì¹˜ë£Œì— ì‹ ê²½ì¨ì•¼ í•  ì‹œê¸°' }
            ];

            categories.forEach((category, index) => {
                const analysis = analyzeLifeCategory(yearDetails, category.id);
                
                text += `${category.title}
${category.description}

ğŸ“Š 10ë…„ ì¢…í•© ë¶„ì„:
${analysis.summary}

ë…„ë„ë³„ ìƒì„¸ ë¶„ì„:
`;
                
                // ì ìˆ˜ ìˆœìœ¼ë¡œ ì •ë ¬ëœ ì¶”ì²œì‚¬í•­ë“¤
                analysis.recommendations.forEach(rec => {
                    const levelText = {
                        'excellent': 'ğŸŸ¢ ìµœì ê¸°',
                        'good': 'ğŸ”µ ì¢‹ìŒ',
                        'caution': 'ğŸŸ¡ ì‹ ì¤‘',
                        'avoid': 'ğŸ”´ ë³´ë¥˜'
                    }[rec.level];
                    
                    text += `â€¢ ${rec.year}ë…„ - ${levelText} (${rec.score}ì )
  ${rec.reason}

`;
                });
                
                // ë§ˆì§€ë§‰ ì¹´í…Œê³ ë¦¬ê°€ ì•„ë‹ˆë©´ êµ¬ë¶„ì„  ì¶”ê°€
                if (index < categories.length - 1) {
                    text += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

`;
                }
            });
            
            text += `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¡ í™œìš© ê°€ì´ë“œ:
ğŸŸ¢ ìµœì ê¸°: ì ê·¹ì ìœ¼ë¡œ ì¶”ì§„í•˜ê¸° ì¢‹ì€ ì‹œê¸°
ğŸ”µ ì¢‹ìŒ: ì¶”ì²œí•˜ëŠ” ì‹œê¸°, ê³„íšì ìœ¼ë¡œ ì§„í–‰
ğŸŸ¡ ì‹ ì¤‘: ì‹ ì¤‘í•˜ê²Œ íŒë‹¨í•˜ì—¬ ì§„í–‰
ğŸ”´ ë³´ë¥˜: í”¼í•˜ê±°ë‚˜ ì—°ê¸°í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ì‹œê¸°

â€» ì´ ë¶„ì„ì€ í•´ìš´ë²ˆí˜¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì°¸ê³  ìë£Œì…ë‹ˆë‹¤.
â€» ì‹¤ì œ ê²°ì •ì€ ê°œì¸ì˜ ìƒí™©ê³¼ íŒë‹¨ì„ ì¢…í•©í•˜ì—¬ ë‚´ë¦¬ì‹œê¸° ë°”ëë‹ˆë‹¤.

ìƒì„±ì¼ì‹œ: ${new Date().toLocaleString('ko-KR')}`;

            return text;
        }

        // ìƒí™œë³„ ì¶”ì²œì‹œê¸° í‘œì‹œ í•¨ìˆ˜
        function displayLifeRecommendations(yearDetails) {
            const section = document.getElementById('lifeRecommendationSection');
            const content = document.getElementById('lifeRecommendationsContent');
            
            // ìƒí™œ ë¶„ì•¼ë³„ ë¶„ì„
            const categories = [
                {
                    id: 'business',
                    title: 'ğŸ’¼ ì‚¬ì—…/ì°½ì—…',
                    icon: 'ğŸ’¼',
                    description: 'ìƒˆë¡œìš´ ì‚¬ì—… ì‹œì‘ì´ë‚˜ ì‚¬ì—… í™•ì¥ì— ì í•©í•œ ì‹œê¸°'
                },
                {
                    id: 'investment',
                    title: 'ğŸ’° íˆ¬ì/ì¬í…Œí¬',
                    icon: 'ğŸ’°',
                    description: 'íˆ¬ì ê²°ì •ì´ë‚˜ ì¬ì • ê´€ë¦¬ì— ìœ ë¦¬í•œ ì‹œê¸°'
                },
                {
                    id: 'marriage',
                    title: 'ğŸ’’ ê²°í˜¼/ì—°ì• ',
                    icon: 'ğŸ’’',
                    description: 'ê²°í˜¼ì´ë‚˜ ì¤‘ìš”í•œ ì—°ì•  ê²°ì •ì— ì¢‹ì€ ì‹œê¸°'
                },
                {
                    id: 'moving',
                    title: 'ğŸ  ì´ì‚¬/ì´ì§',
                    icon: 'ğŸ ',
                    description: 'ê±°ì£¼ì§€ ë³€ê²½ì´ë‚˜ ì§ì¥ ì´ë™ì— ì í•©í•œ ì‹œê¸°'
                },
                {
                    id: 'study',
                    title: 'ğŸ“š í•™ìŠµ/ìê¸°ê³„ë°œ',
                    icon: 'ğŸ“š',
                    description: 'ìƒˆë¡œìš´ ê³µë¶€ë‚˜ ê¸°ìˆ  ìŠµë“ì— ì§‘ì¤‘í•˜ê¸° ì¢‹ì€ ì‹œê¸°'
                },
                {
                    id: 'health',
                    title: 'ğŸ¥ ê±´ê°•ê´€ë¦¬',
                    icon: 'ğŸ¥',
                    description: 'ê±´ê°• ì ê²€ì´ë‚˜ ì¹˜ë£Œì— ì‹ ê²½ì¨ì•¼ í•  ì‹œê¸°'
                }
            ];
            
            let html = '';
            
            categories.forEach(category => {
                const analysis = analyzeLifeCategory(yearDetails, category.id);
                
                html += `
                    <div class="life-category">
                        <h3 class="life-category-title">${category.title}</h3>
                        <div class="timing-summary">
                            <h4>ğŸ“Š 10ë…„ ì¢…í•© ë¶„ì„</h4>
                            <p>${analysis.summary}</p>
                        </div>
                        <div class="timing-grid">
                            ${analysis.recommendations.map(rec => `
                                <div class="timing-item ${rec.level}">
                                    <div class="timing-badge ${rec.level}">${rec.badge}</div>
                                    <div class="timing-year">${rec.year}ë…„</div>
                                    <div class="timing-score">ì¢…í•©ì ìˆ˜: ${rec.score}ì </div>
                                    <div class="timing-reason">${rec.reason}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            
            content.innerHTML = html;
            section.style.display = 'block';
        }
        
        // ìƒí™œ ë¶„ì•¼ë³„ ë¶„ì„ í•¨ìˆ˜
        function analyzeLifeCategory(yearDetails, categoryId) {
            const recommendations = [];
            let summary = '';
            
            yearDetails.forEach(detail => {
                const analysis = getCategoryAnalysis(detail, categoryId);
                recommendations.push({
                    year: detail.year,
                    score: detail.combinedScore,
                    level: analysis.level,
                    badge: analysis.badge,
                    reason: analysis.reason
                });
            });
            
            // ì¹´í…Œê³ ë¦¬ë³„ ì¢…í•© ë¶„ì„
            const excellentYears = recommendations.filter(r => r.level === 'excellent').length;
            const goodYears = recommendations.filter(r => r.level === 'good').length;
            const cautionYears = recommendations.filter(r => r.level === 'caution').length;
            const avoidYears = recommendations.filter(r => r.level === 'avoid').length;
            
            switch(categoryId) {
                case 'business':
                    summary = `ì‚¬ì—…/ì°½ì—…ì— ìµœì ì¸ í•´ëŠ” ${excellentYears}ë…„, ì¢‹ì€ í•´ëŠ” ${goodYears}ë…„ì…ë‹ˆë‹¤. íŠ¹íˆ í•´ìš´ì ìˆ˜ê°€ 85ì  ì´ìƒì¸ í•´ì—ëŠ” ì ê·¹ì ì¸ ì‚¬ì—… í™•ì¥ì„ ê³ ë ¤í•´ë³´ì„¸ìš”.`;
                    break;
                case 'investment':
                    summary = `íˆ¬ìì— ìœ ë¦¬í•œ í•´ëŠ” ì´ ${excellentYears + goodYears}ë…„ì…ë‹ˆë‹¤. 0/5 í•´ìš´ì´ ìˆëŠ” í•´ì—ëŠ” ì‹ ì¤‘í•œ íˆ¬ì ì „ëµì´ í•„ìš”í•©ë‹ˆë‹¤.`;
                    break;
                case 'marriage':
                    summary = `ê²°í˜¼/ì—°ì• ì— ì¢‹ì€ í•´ëŠ” ${excellentYears + goodYears}ë…„ì…ë‹ˆë‹¤. í•´ìš´ì ìˆ˜ê°€ ë†’ì€ í•´ì¼ìˆ˜ë¡ ì¸ì—° ë§Œë‚¨ì˜ ê¸°íšŒê°€ ë§ì•„ì§‘ë‹ˆë‹¤.`;
                    break;
                case 'moving':
                    summary = `ì´ì‚¬/ì´ì§ì— ì í•©í•œ í•´ëŠ” ${excellentYears + goodYears}ë…„ì…ë‹ˆë‹¤. ë³€í™”ì˜ í•´ìš´(0ìœ¼ë¡œ ì‹œì‘)ì´ ìˆëŠ” í•´ì— íŠ¹íˆ ì£¼ëª©í•˜ì„¸ìš”.`;
                    break;
                case 'study':
                    summary = `í•™ìŠµ/ìê¸°ê³„ë°œì— ì§‘ì¤‘í•˜ê¸° ì¢‹ì€ í•´ëŠ” ${excellentYears + goodYears}ë…„ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ì‹œì‘ì˜ ê¸°ìš´ì´ ìˆëŠ” í•´ì— ë„ì „í•´ë³´ì„¸ìš”.`;
                    break;
                case 'health':
                    summary = `ê±´ê°•ê´€ë¦¬ì— ì‹ ê²½ì¨ì•¼ í•  í•´ëŠ” ${cautionYears + avoidYears}ë…„ì…ë‹ˆë‹¤. í•´ìš´ì ìˆ˜ê°€ ë‚®ì€ í•´ì¼ìˆ˜ë¡ ì˜ˆë°©ì— ì§‘ì¤‘í•˜ì„¸ìš”.`;
                    break;
            }
            
            return {
                summary,
                recommendations: recommendations.sort((a, b) => b.score - a.score)
            };
        }
        
        // ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ ë¶„ì„
        function getCategoryAnalysis(detail, categoryId) {
            const score = detail.combinedScore;
            const hasReset = detail.haeun1.startsWith('0/') || detail.haeun2.startsWith('0/');
            const haeunNumbers = [detail.haeun1, detail.haeun2];
            
            let level, badge, reason;
            
            switch(categoryId) {
                case 'business':
                    if (score >= 85) {
                        level = 'excellent';
                        badge = 'ìµœì ê¸°';
                        reason = 'ì‚¬ì—… ìš´ì„¸ê°€ ë§¤ìš° ì¢‹ì•„ ìƒˆë¡œìš´ ë„ì „ì´ë‚˜ í™•ì¥ì— ìµœì ì˜ ì‹œê¸°ì…ë‹ˆë‹¤.';
                    } else if (score >= 75) {
                        level = 'good';
                        badge = 'ì¢‹ìŒ';
                        reason = 'ì•ˆì •ì ì¸ ì‚¬ì—… ìš´ì˜ê³¼ ì ì§„ì  ì„±ì¥ì— ì í•©í•œ ì‹œê¸°ì…ë‹ˆë‹¤.';
                    } else if (score >= 65) {
                        level = 'caution';
                        badge = 'ì‹ ì¤‘';
                        reason = 'ì‹ ì¤‘í•œ ê³„íšê³¼ ì¤€ë¹„ê°€ í•„ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤.';
                    } else {
                        level = 'avoid';
                        badge = 'ë³´ë¥˜';
                        reason = 'í° ê²°ì •ë³´ë‹¤ëŠ” ê¸°ì¡´ ì‚¬ì—… ì•ˆì •í™”ì— ì§‘ì¤‘í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.';
                    }
                    break;
                    
                case 'investment':
                    if (hasReset) {
                        level = 'caution';
                        badge = 'ì‹ ì¤‘';
                        reason = 'ìƒˆë¡œìš´ ì‹œì‘ì˜ í•´ìš´ìœ¼ë¡œ ë³€í™”ê°€ ë§ì•„ ì‹ ì¤‘í•œ íˆ¬ìê°€ í•„ìš”í•©ë‹ˆë‹¤.';
                    } else if (score >= 80) {
                        level = 'excellent';
                        badge = 'ìµœì ê¸°';
                        reason = 'ì¬ë¬¼ìš´ì´ ì¢‹ì•„ íˆ¬ì ìˆ˜ìµì„ ê¸°ëŒ€í•  ìˆ˜ ìˆëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.';
                    } else if (score >= 70) {
                        level = 'good';
                        badge = 'ì¢‹ìŒ';
                        reason = 'ì•ˆì •ì ì¸ íˆ¬ìì™€ ìì‚° ê´€ë¦¬ì— ì í•©í•œ ì‹œê¸°ì…ë‹ˆë‹¤.';
                    } else {
                        level = 'avoid';
                        badge = 'ë³´ë¥˜';
                        reason = 'íˆ¬ìë³´ë‹¤ëŠ” ì €ì¶•ê³¼ ì•ˆì •ì ì¸ ìì‚° ê´€ë¦¬ì— ì§‘ì¤‘í•˜ì„¸ìš”.';
                    }
                    break;
                    
                case 'marriage':
                    if (score >= 80) {
                        level = 'excellent';
                        badge = 'ìµœì ê¸°';
                        reason = 'ì• ì •ìš´ì´ ì¢‹ì•„ ê²°í˜¼ì´ë‚˜ ì¤‘ìš”í•œ ì—°ì•  ê²°ì •ì— ìµœì ì˜ ì‹œê¸°ì…ë‹ˆë‹¤.';
                    } else if (score >= 70) {
                        level = 'good';
                        badge = 'ì¢‹ìŒ';
                        reason = 'ì¸ì—° ë§Œë‚¨ì´ë‚˜ ê´€ê³„ ë°œì „ì— ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.';
                    } else if (score >= 60) {
                        level = 'caution';
                        badge = 'ì‹ ì¤‘';
                        reason = 'ì„œë‘ë¥´ì§€ ë§ê³  ì‹ ì¤‘í•˜ê²Œ ê´€ê³„ë¥¼ ë°œì „ì‹œì¼œ ë‚˜ê°€ì„¸ìš”.';
                    } else {
                        level = 'avoid';
                        badge = 'ë³´ë¥˜';
                        reason = 'ê¸‰í•œ ê²°ì •ë³´ë‹¤ëŠ” ìê¸° ê³„ë°œì— ì§‘ì¤‘í•˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.';
                    }
                    break;
                    
                case 'moving':
                    if (hasReset) {
                        level = 'excellent';
                        badge = 'ìµœì ê¸°';
                        reason = 'ìƒˆë¡œìš´ ì‹œì‘ì˜ í•´ìš´ìœ¼ë¡œ ì´ì‚¬ë‚˜ ì´ì§ì— ë§¤ìš° ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.';
                    } else if (score >= 75) {
                        level = 'good';
                        badge = 'ì¢‹ìŒ';
                        reason = 'í™˜ê²½ ë³€í™”ì— ì ì‘í•˜ê¸° ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.';
                    } else if (score >= 65) {
                        level = 'caution';
                        badge = 'ì‹ ì¤‘';
                        reason = 'ì¶©ë¶„í•œ ì¤€ë¹„ì™€ ê³„íš í›„ì— ì´ë™ì„ ê³ ë ¤í•˜ì„¸ìš”.';
                    } else {
                        level = 'avoid';
                        badge = 'ë³´ë¥˜';
                        reason = 'í˜„ì¬ ìœ„ì¹˜ì—ì„œ ì•ˆì •ì„ ì°¾ëŠ” ê²ƒì´ ë” ì¢‹ìŠµë‹ˆë‹¤.';
                    }
                    break;
                    
                case 'study':
                    if (hasReset || score >= 75) {
                        level = 'excellent';
                        badge = 'ìµœì ê¸°';
                        reason = 'ìƒˆë¡œìš´ í•™ìŠµì´ë‚˜ ê¸°ìˆ  ìŠµë“ì— ë§¤ìš° ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.';
                    } else if (score >= 65) {
                        level = 'good';
                        badge = 'ì¢‹ìŒ';
                        reason = 'ê¾¸ì¤€í•œ í•™ìŠµê³¼ ìê¸°ê³„ë°œì— ì í•©í•œ ì‹œê¸°ì…ë‹ˆë‹¤.';
                    } else if (score >= 55) {
                        level = 'caution';
                        badge = 'ì‹ ì¤‘';
                        reason = 'ê¸°ì´ˆë¥¼ ë‹¤ì§€ëŠ” í•™ìŠµì— ì§‘ì¤‘í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.';
                    } else {
                        level = 'avoid';
                        badge = 'íœ´ì‹';
                        reason = 'ë¬´ë¦¬í•œ í•™ìŠµë³´ë‹¤ëŠ” íœ´ì‹ê³¼ ì¬ì¶©ì „ì˜ ì‹œê¸°ì…ë‹ˆë‹¤.';
                    }
                    break;
                    
                case 'health':
                    if (score >= 80) {
                        level = 'excellent';
                        badge = 'ì¢‹ìŒ';
                        reason = 'ê±´ê°• ìƒíƒœê°€ ì¢‹ì•„ í™œë™ì ì¸ ìƒí™œì„ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
                    } else if (score >= 70) {
                        level = 'good';
                        badge = 'ì–‘í˜¸';
                        reason = 'ê·œì¹™ì ì¸ ìƒí™œê³¼ ìš´ë™ìœ¼ë¡œ ê±´ê°•ì„ ìœ ì§€í•˜ì„¸ìš”.';
                    } else if (score >= 60) {
                        level = 'caution';
                        badge = 'ì£¼ì˜';
                        reason = 'ê±´ê°• ê´€ë¦¬ì— ë”ìš± ì‹ ê²½ì“°ê³  ì •ê¸° ê²€ì§„ì„ ë°›ìœ¼ì„¸ìš”.';
                    } else {
                        level = 'avoid';
                        badge = 'ê´€ë¦¬';
                        reason = 'ê±´ê°•ì— íŠ¹ë³„íˆ ì£¼ì˜í•˜ê³  ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”.';
                    }
                    break;
            }
            
            return { level, badge, reason };
        }

        // í•´ìš´ë²ˆí˜¸ ê³„ì‚°
        function calculateHaeun(baseHaeun, yearOffset) {
            let [numerator, denominator] = baseHaeun.split('/').map(Number);
            
            for (let i = 0; i < yearOffset; i++) {
                numerator += 1;
                denominator += 1;
                
                // ë¦¬ì…‹ ì¡°ê±´
                if (numerator === 10 && denominator === 18) {
                    numerator = 0; denominator = 9;
                } else if (numerator === 10 && denominator === 17) {
                    numerator = 0; denominator = 8;
                } else if (numerator === 10 && denominator === 16) {
                    numerator = 0; denominator = 7;
                } else if (numerator === 10 && denominator === 15) {
                    numerator = 0; denominator = 6;
                } else if (numerator === 10 && denominator === 14) {
                    numerator = 0; denominator = 5;
                }
            }
            
            return `${numerator}/${denominator}`;
        }

        // ì ìˆ˜ ê³„ì‚° (ì¶”ì • í¬í•¨)
        function getScore(haeun) {
            if (haeunDatabase[haeun]) {
                return haeunDatabase[haeun].score;
            }
            
            // ì¶”ì • ë¡œì§ (ëª¨ë“  í•´ìš´ë²ˆí˜¸ ëŒ€ì‘)
            let [num, den] = haeun.split('/').map(Number);
            let baseScore = 60;
            
            // ë¶„ìì— ë”°ë¥¸ ì ìˆ˜ ì¡°ì •
            if (num === 0) baseScore += 10; // ìƒˆë¡œìš´ ì‹œì‘
            else if (num === 1) baseScore += 20; // ì‹¤ì²´ ìˆëŠ” ë³€í™”
            else if (num === 2) baseScore += 5; // ì¤€ë¹„ ë‹¨ê³„
            else if (num === 3) baseScore += 15; // ë³´ìƒ ë‹¨ê³„
            else if (num === 4) baseScore += 18; // ì‹¤ì²œ ë‹¨ê³„
            else if (num === 5) baseScore += 10; // ì£¼ë„ ë‹¨ê³„
            else if (num === 6) baseScore += 20; // ê°ˆë“± ê·¹ë³µ
            else if (num === 7) baseScore += 15; // ê²°ì • ë‹¨ê³„
            else if (num === 8) baseScore += 0; // ì´ë¯¸ì§€ í˜•ì„±
            else if (num === 9) baseScore += 25; // ë³€í™” ì™„ì„±
            
            // ë¶„ëª¨ì— ë”°ë¥¸ ì¡°ì •
            baseScore += Math.floor(den / 2);
            
            return Math.min(95, Math.max(55, baseScore));
        }

        // ì˜ë¯¸ ì¶”ì •
        function getMeaning(haeun) {
            if (haeunDatabase[haeun]) {
                return haeunDatabase[haeun].meaning;
            }
            
            let [num, den] = haeun.split('/').map(Number);
            const meanings = {
                0: "ìƒˆë¡œìš´ ì‹œì‘ê³¼ ë³€í™”ì˜ ì‹œê¸°",
                1: "ì‹¤ì§ˆì ì¸ ë°œì „ê³¼ ì„±ì¥",
                2: "ì¤€ë¹„ì™€ ë„ì•½ì˜ ë‹¨ê³„",
                3: "ë³´ìƒê³¼ ê²°ì‹¤ì˜ ì‹œê¸°",
                4: "ì‹¤ì²œê³¼ í–‰ë™ì˜ ì¤‘ìš”ì„±",
                5: "ì£¼ë„ì ì¸ ê²°ì •ì˜ ì‹œê¸°",
                6: "ê°ˆë“± ê·¹ë³µê³¼ ì„ íƒì˜ ì‹œê¸°",
                7: "ê²°ì •ê³¼ ì´ë™ì˜ ë‹¨ê³„",
                8: "ì´ë¯¸ì§€ í˜•ì„±ê³¼ í‰í–‰ ìœ ì§€",
                9: "ë³€í™” ì™„ì„±ê³¼ ìƒˆë¡œìš´ ì¤€ë¹„"
            };
            
            return meanings[num] || "ìš´ì„¸ ë³€í™”ì˜ ì‹œê¸°";
        }

        // ê·¸ë˜í”„ ìƒì„± ë©”ì¸ í•¨ìˆ˜
        function generateGraph() {
            const haeun1 = document.getElementById('haeun1').value.trim();
            const haeun2 = document.getElementById('haeun2').value.trim();
            
            // ì…ë ¥ ê²€ì¦
            if (!haeun1 || !haeun2) {
                showError('ë‘ ê°œì˜ í•´ìš´ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!validateHaeun(haeun1)) {
                showError('ì²« ë²ˆì§¸ í•´ìš´ë²ˆí˜¸ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. (ì˜ˆ: 9/16)');
                return;
            }
            
            if (!validateHaeun(haeun2)) {
                showError('ë‘ ë²ˆì§¸ í•´ìš´ë²ˆí˜¸ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. (ì˜ˆ: 5/11)');
                return;
            }
            
            // 10ë…„ê°„ ë°ì´í„° ìƒì„±
            const years = [];
            const combinedScores = [];
            const yearDetails = [];
            
            for (let i = 0; i < 10; i++) {
                const year = 2025 + i;
                years.push(year);
                
                const calculatedHaeun1 = calculateHaeun(haeun1, i);
                const calculatedHaeun2 = calculateHaeun(haeun2, i);
                const score1 = getScore(calculatedHaeun1);
                const score2 = getScore(calculatedHaeun2);
                const combinedScore = Math.round((score1 + score2) / 2);
                
                combinedScores.push(combinedScore);
                
                let specialType = '';
                if (calculatedHaeun1.startsWith('0/') || calculatedHaeun2.startsWith('0/')) {
                    specialType = 'reset';
                }
                if (combinedScore >= 85) {
                    specialType = 'peak';
                }
                
                yearDetails.push({
                    year: year,
                    haeun1: calculatedHaeun1,
                    haeun2: calculatedHaeun2,
                    score1: score1,
                    score2: score2,
                    combinedScore: combinedScore,
                    meaning1: getMeaning(calculatedHaeun1),
                    meaning2: getMeaning(calculatedHaeun2),
                    specialType: specialType
                });
            }
            
            // í†µê³„ ê³„ì‚°
            const maxScore = Math.max(...combinedScores);
            const minScore = Math.min(...combinedScores);
            const avgScore = Math.round(combinedScores.reduce((a, b) => a + b, 0) / combinedScores.length);
            const bestYearIndex = combinedScores.findIndex(score => score === maxScore);
            const worstYearIndex = combinedScores.findIndex(score => score === minScore);
            
            // ìš”ì•½ ì •ë³´ ì—…ë°ì´íŠ¸
            document.getElementById('bestYear').innerHTML = `${years[bestYearIndex]}ë…„<br>${maxScore}ì `;
            document.getElementById('avgScore').innerHTML = `${avgScore}ì <br>ì „ì²´ í‰ê· `;
            document.getElementById('cautionYear').innerHTML = `${years[worstYearIndex]}ë…„<br>${minScore}ì `;
            
            // ê·¸ë˜í”„ ìƒì„±
            createChart(years, combinedScores, yearDetails, haeun1, haeun2);
            
            // ìƒì„¸ ì •ë³´ í‘œì‹œ
            displayYearDetails(yearDetails);
            
            // í•´ìš´ í’€ì´ í‘œì‹œ (10ë…„ì¹˜ ë…„ë„ë³„)
            displayAllYearHaeunDetails(yearDetails);
            
            // ìƒí™œë³„ ì¶”ì²œì‹œê¸° í‘œì‹œ
            displayLifeRecommendations(yearDetails);
            
            // ê²°ê³¼ ì„¹ì…˜ í‘œì‹œ
            document.getElementById('resultSection').style.display = 'block';
            
            // ê²°ê³¼ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            document.getElementById('resultSection').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }

        // ì°¨íŠ¸ ìƒì„±
        function createChart(years, scores, details, baseHaeun1, baseHaeun2) {
            const ctx = document.getElementById('haeunChart').getContext('2d');
            
            // ê¸°ì¡´ ì°¨íŠ¸ ì œê±°
            if (currentChart) {
                currentChart.destroy();
            }
            
            currentChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [{
                        label: `ì¢…í•© í•´ìš´ (${baseHaeun1} + ${baseHaeun2})`,
                        data: scores,
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        borderWidth: 5,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: scores.map(score => {
                            if (score >= 85) return '#ffd700';
                            if (score >= 75) return '#4ecdc4';
                            if (score >= 65) return '#ff9800';
                            return '#f44336';
                        }),
                        pointBorderColor: '#fff',
                        pointBorderWidth: 3,
                        pointRadius: 10,
                        pointHoverRadius: 12
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.9)',
                            titleColor: '#fff',
                            titleFont: { size: 16, weight: 'bold' },
                            bodyColor: '#fff',
                            bodyFont: { size: 13 },
                            borderColor: '#667eea',
                            borderWidth: 2,
                            padding: 15,
                            callbacks: {
                                title: function(context) {
                                    return `${context[0].label}ë…„ ì¢…í•© ìš´ì„¸`;
                                },
                                label: function(context) {
                                    const index = context.dataIndex;
                                    const detail = details[index];
                                    return [
                                        `ì¢…í•© ì ìˆ˜: ${detail.combinedScore}ì `,
                                        `${baseHaeun1} â†’ ${detail.haeun1} (${detail.score1}ì )`,
                                        `${baseHaeun2} â†’ ${detail.haeun2} (${detail.score2}ì )`,
                                        `ì£¼ìš” ì˜ë¯¸: ${detail.meaning1}`
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 50,
                            max: 100,
                            grid: {
                                color: 'rgba(102, 126, 234, 0.1)',
                                drawBorder: false
                            },
                            ticks: {
                                font: { size: 13 },
                                callback: function(value) {
                                    return value + 'ì ';
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(102, 126, 234, 0.05)',
                                drawBorder: false
                            },
                            ticks: {
                                font: { size: 13 }
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }

        // ìƒì„¸ ì •ë³´ í‘œì‹œ
        function displayYearDetails(details) {
            const container = document.getElementById('yearDetails');
            let html = '';
            
            details.forEach(detail => {
                const scoreClass = detail.combinedScore >= 80 ? 'score-high' : 
                                detail.combinedScore >= 70 ? 'score-medium' : 'score-low';
                
                const cardClass = detail.specialType === 'peak' ? 'peak' : 
                                detail.specialType === 'reset' ? 'reset' : '';
                
                html += `
                    <div class="year-card ${cardClass}">
                        <strong>${detail.year}ë…„</strong>
                        ${detail.specialType === 'peak' ? 'ğŸ‘‘' : ''}
                        ${detail.specialType === 'reset' ? 'ğŸ”„' : ''}
                        <div style="font-size: 18px; margin: 8px 0;">
                            ì¢…í•©: <span class="${scoreClass}">${detail.combinedScore}ì </span>
                        </div>
                        <hr style="margin: 10px 0; border: none; border-top: 1px solid #eee;">
                        <div style="font-size: 12px; margin-bottom: 5px;">
                            ${detail.haeun1} (${detail.score1}ì )
                        </div>
                        <div style="font-size: 12px; margin-bottom: 8px;">
                            ${detail.haeun2} (${detail.score2}ì )
                        </div>
                        <div style="font-size: 10px; color: #666; line-height: 1.3;">
                            ${detail.meaning1}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // 10ë…„ì¹˜ í•´ìš´ ìƒì„¸ í’€ì´ í‘œì‹œ (í…ìŠ¤íŠ¸ ë³µì‚¬ìš©)
        function displayAllYearHaeunDetails(yearDetails) {
            const section = document.getElementById('haeunDetailSection');
            const content = document.getElementById('haeunDetailContent');
            
            // ë³µì‚¬ ë²„íŠ¼ê³¼ ì œëª© ì¶”ê°€
            let html = `
                <div class="copy-section">
                    <button class="copy-btn" onclick="copyHaeunText()">ğŸ“‹ í•´ìš´í’€ì´ í…ìŠ¤íŠ¸ ë³µì‚¬</button>
                    <div class="copy-status" id="copyStatus" style="display: none;">ë³µì‚¬ ì™„ë£Œ! âœ…</div>
                </div>
                <div id="haeunTextContent" class="haeun-text-content">
            `;
            
            // ì œëª© ì¶”ê°€
            html += `
                <div class="document-title">
                    <h3>ğŸ”® 10ë…„ê°„ í•´ìš´ë²ˆí˜¸ ìƒì„¸ í’€ì´</h3>
                    <div class="document-subtitle">ìƒì„±ì¼: ${new Date().toLocaleDateString('ko-KR')}</div>
                </div>
            `;
            
            // ê° ë…„ë„ë³„ í•´ìš´ í’€ì´
            yearDetails.forEach((detail, index) => {
                const haeunData1 = haeunDatabase[detail.haeun1];
                const haeunData2 = haeunDatabase[detail.haeun2];
                
                html += `
                    <div class="year-fortune-section">
                        <div class="year-header">
                            <h4>ğŸ“… ${detail.year}ë…„ í•´ìš´ ë¶„ì„</h4>
                            <div class="year-summary">
                                ì¢…í•©ì ìˆ˜: ${detail.combinedScore}ì  | 
                                ì²« ë²ˆì§¸ í•´ìš´: ${detail.haeun1} (${detail.score1}ì ) | 
                                ë‘ ë²ˆì§¸ í•´ìš´: ${detail.haeun2} (${detail.score2}ì )
                            </div>
                        </div>
                        
                        <div class="haeun-details">
                            <div class="haeun-block">
                                <h5>ğŸ¯ ì²« ë²ˆì§¸ í•´ìš´: ${detail.haeun1}</h5>
                                <div class="haeun-meaning">ì˜ë¯¸: ${detail.meaning1}</div>
                                ${generateHaeunDetailText(detail.haeun1, haeunData1)}
                            </div>
                            
                            <div class="haeun-block">
                                <h5>ğŸ¯ ë‘ ë²ˆì§¸ í•´ìš´: ${detail.haeun2}</h5>
                                <div class="haeun-meaning">ì˜ë¯¸: ${detail.meaning2}</div>
                                ${generateHaeunDetailText(detail.haeun2, haeunData2)}
                            </div>
                        </div>
                        
                        <div class="year-divider">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
                    </div>
                `;
            });
            
            html += '</div>'; // haeunTextContent ì¢…ë£Œ
            
            content.innerHTML = html;
            section.style.display = 'block';
        }
        
        // ê°œë³„ í•´ìš´ ìƒì„¸ í…ìŠ¤íŠ¸ ìƒì„±
        function generateHaeunDetailText(haeunNumber, haeunData) {
            if (!haeunData || !haeunData.general) {
                return `<div class="no-detail">ìƒì„¸ í’€ì´ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.</div>`;
            }
            
            let html = `
                <div class="general-info">
                    <strong>ğŸ“– ì „ì²´ ìš´ì„¸:</strong><br>
                    ${haeunData.general}
                </div>
            `;
            
            // 4ê°€ì§€ ìš´ì„¸ ì˜ì—­ (í…ìŠ¤íŠ¸ í˜•íƒœ)
            if (haeunData.money) {
                html += `
                    <div class="fortune-detail">
                        <strong>ğŸ’° ${haeunData.money.title}:</strong><br>
                        ${haeunData.money.content}
                        ${haeunData.money.example ? `<br><em>ì˜ˆì‹œ: ${haeunData.money.example}</em>` : ''}
                    </div>
                `;
            }
            
            if (haeunData.love) {
                html += `
                    <div class="fortune-detail">
                        <strong>ğŸ’• ${haeunData.love.title}:</strong><br>
                        ${haeunData.love.content}
                        ${haeunData.love.example ? `<br><em>ì˜ˆì‹œ: ${haeunData.love.example}</em>` : ''}
                    </div>
                `;
            }
            
            if (haeunData.work) {
                html += `
                    <div class="fortune-detail">
                        <strong>ğŸ’¼ ${haeunData.work.title}:</strong><br>
                        ${haeunData.work.content}
                        ${haeunData.work.example ? `<br><em>ì˜ˆì‹œ: ${haeunData.work.example}</em>` : ''}
                    </div>
                `;
            }
            
            if (haeunData.health) {
                html += `
                    <div class="fortune-detail">
                        <strong>ğŸ¥ ${haeunData.health.title}:</strong><br>
                        ${haeunData.health.content}
                        ${haeunData.health.warning ? `<br><strong>âš ï¸ ì£¼ì˜: ${haeunData.health.warning}</strong>` : ''}
                    </div>
                `;
            }
            
            // ì¡°ì–¸ ì„¹ì…˜
            if (haeunData.todo && haeunData.todo.length > 0) {
                html += `
                    <div class="advice-detail">
                        <strong>âœ… ì¶”ì²œ í–‰ë™:</strong><br>
                        ${haeunData.todo.map((item, index) => `${index + 1}. ${item}`).join('<br>')}
                    </div>
                `;
            }
            
            if (haeunData.caution && haeunData.caution.length > 0) {
                html += `
                    <div class="advice-detail">
                        <strong>âš ï¸ ì£¼ì˜ì‚¬í•­:</strong><br>
                        ${haeunData.caution.map((item, index) => `${index + 1}. ${item}`).join('<br>')}
                    </div>
                `;
            }
            
            return html;
        }
        
        // í…ìŠ¤íŠ¸ ë³µì‚¬ í•¨ìˆ˜
        function copyHaeunText() {
            const content = document.getElementById('haeunTextContent');
            const text = content.innerText || content.textContent;
            
            // í´ë¦½ë³´ë“œì— ë³µì‚¬
            navigator.clipboard.writeText(text).then(() => {
                // ë³µì‚¬ ì™„ë£Œ ë©”ì‹œì§€ í‘œì‹œ
                const status = document.getElementById('copyStatus');
                status.style.display = 'inline-block';
                setTimeout(() => {
                    status.style.display = 'none';
                }, 2000);
            }).catch(err => {
                // ë³µì‚¬ ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ ë°©ë²•
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                const status = document.getElementById('copyStatus');
                status.style.display = 'inline-block';
                setTimeout(() => {
                    status.style.display = 'none';
                }, 2000);
            });
        }
        
        // í•´ìš´ ìƒì„¸ í’€ì´ í‘œì‹œ (ê¸°ì¡´ í•¨ìˆ˜ - ì‚¬ìš©í•˜ì§€ ì•ŠìŒ)
        function displayHaeunDetail(haeunNumber, haeunData) {
            const section = document.getElementById('haeunDetailSection');
            const content = document.getElementById('haeunDetailContent');
            
            if (!haeunData || !haeunData.general) {
                section.style.display = 'none';
                return;
            }
            
            let html = `
                <div class="haeun-overview">
                    <h4>í•´ìš´ë²ˆí˜¸ ${haeunNumber} (${haeunData.score}ì )</h4>
                    <div class="meaning">${haeunData.meaning}</div>
                    <div class="general">${haeunData.general}</div>
                </div>
            `;
            
            // 4ê°€ì§€ ìš´ì„¸ ì˜ì—­
            if (haeunData.money || haeunData.love || haeunData.work || haeunData.health) {
                html += '<div class="fortune-grid">';
                
                // ì¬ë¬¼ìš´
                if (haeunData.money) {
                    html += `
                        <div class="fortune-card">
                            <h5>ğŸ’° ${haeunData.money.title}</h5>
                            <div class="content">${haeunData.money.content}</div>
                            ${haeunData.money.example ? `<div class="example">ğŸ“ ${haeunData.money.example}</div>` : ''}
                        </div>
                    `;
                }
                
                // ì• ì •ìš´
                if (haeunData.love) {
                    html += `
                        <div class="fortune-card">
                            <h5>ğŸ’• ${haeunData.love.title}</h5>
                            <div class="content">${haeunData.love.content}</div>
                            ${haeunData.love.example ? `<div class="example">ğŸ“ ${haeunData.love.example}</div>` : ''}
                        </div>
                    `;
                }
                
                // ì§ì¥ìš´
                if (haeunData.work) {
                    html += `
                        <div class="fortune-card">
                            <h5>ğŸ’¼ ${haeunData.work.title}</h5>
                            <div class="content">${haeunData.work.content}</div>
                            ${haeunData.work.example ? `<div class="example">ğŸ“ ${haeunData.work.example}</div>` : ''}
                        </div>
                    `;
                }
                
                // ê±´ê°•ìš´
                if (haeunData.health) {
                    html += `
                        <div class="fortune-card">
                            <h5>ğŸ¥ ${haeunData.health.title}</h5>
                            <div class="content">${haeunData.health.content}</div>
                            ${haeunData.health.warning ? `<div class="warning">âš ï¸ ${haeunData.health.warning}</div>` : ''}
                        </div>
                    `;
                }
                
                html += '</div>';
            }
            
            // ì¡°ì–¸ ì„¹ì…˜ (í•  ì¼ê³¼ ì£¼ì˜ì‚¬í•­)
            if ((haeunData.todo && haeunData.todo.length > 0) || (haeunData.caution && haeunData.caution.length > 0)) {
                html += '<div class="advice-section">';
                
                // í•  ì¼
                if (haeunData.todo && haeunData.todo.length > 0) {
                    html += `
                        <div class="advice-card todo-card">
                            <h5>âœ… ì¶”ì²œ í–‰ë™</h5>
                            <ul class="advice-list">
                                ${haeunData.todo.map(item => `<li>${item}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
                
                // ì£¼ì˜ì‚¬í•­
                if (haeunData.caution && haeunData.caution.length > 0) {
                    html += `
                        <div class="advice-card caution-card">
                            <h5>âš ï¸ ì£¼ì˜ì‚¬í•­</h5>
                            <ul class="advice-list">
                                ${haeunData.caution.map(item => `<li>${item}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
                
                html += '</div>';
            }
            
            content.innerHTML = html;
            section.style.display = 'block';
        }

        // íƒ­ ì „í™˜ í•¨ìˆ˜
        function showTab(tabName) {
            // ëª¨ë“  íƒ­ ë²„íŠ¼ ë¹„í™œì„±í™”
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // ëª¨ë“  íƒ­ ì»¨í…ì¸  ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ì„ íƒëœ íƒ­ í™œì„±í™”
            event.target.classList.add('active');
            document.getElementById(tabName + '-tab').classList.add('active');
        }

        // í–‰ìš´ ë¶„ì„ ë°ì´í„°ë² ì´ìŠ¤
        const colorDatabase = {
            1: [
                { name: 'ê³¨ë“œ', code: '#FFD700' },
                { name: 'í™”ì´íŠ¸', code: '#FFFFFF' },
                { name: 'ì´ˆë¡', code: '#4CAF50' }
            ],
            2: [
                { name: 'í™”ì´íŠ¸', code: '#FFFFFF' },
                { name: 'ë¶„í™', code: '#FF69B4' },
                { name: 'íŒŒë‘', code: '#2196F3' }
            ],
            3: [
                { name: 'ë¶„í™', code: '#FF69B4' },
                { name: 'í™”ì´íŠ¸', code: '#FFFFFF' },
                { name: 'ì´ˆë¡', code: '#4CAF50' }
            ],
            4: [
                { name: 'ì²­ë¡', code: '#00BCD4' },
                { name: 'ë¸”ë™', code: '#000000' }
            ],
            5: [
                { name: 'ë¶„í™', code: '#FF69B4' },
                { name: 'í™”ì´íŠ¸', code: '#FFFFFF' },
                { name: 'ì´ˆë¡', code: '#4CAF50' }
            ],
            6: [
                { name: 'ë¸”ë™', code: '#000000' }
            ],
            7: [
                { name: 'ë¸”ë™', code: '#000000' },
                { name: 'í™”ì´íŠ¸', code: '#FFFFFF' }
            ],
            8: [
                { name: 'ë¸”ë™', code: '#000000' }
            ],
            9: [
                { name: 'ê³¨ë“œ', code: '#FFD700' },
                { name: 'í™”ì´íŠ¸', code: '#FFFFFF' },
                { name: 'ì´ˆë¡', code: '#4CAF50' }
            ],
            10: [
                { name: 'ë¯¼íŠ¸', code: '#00C896' },
                { name: 'í•˜ëŠ˜', code: '#87CEEB' },
                { name: 'í™”ì´íŠ¸', code: '#FFFFFF' }
            ],
            11: [
                { name: 'ë¸”ë™', code: '#000000' },
                { name: 'ê³¨ë“œ', code: '#FFD700' }
            ],
            12: [
                { name: 'ë¸”ë™', code: '#000000' }
            ],
            13: [
                { name: 'ë¶„í™', code: '#FF69B4' },
                { name: 'ë¸”ë™', code: '#000000' }
            ],
            14: [
                { name: 'ë¸”ë™', code: '#000000' },
                { name: 'í™”ì´íŠ¸', code: '#FFFFFF' }
            ],
            15: [
                { name: 'ë¸”ë™', code: '#000000' },
                { name: 'í™”ì´íŠ¸', code: '#FFFFFF' }
            ],
            16: [
                { name: 'ë¸”ë™', code: '#000000' }
            ],
            17: [
                { name: 'ê³¨ë“œ', code: '#FFD700' },
                { name: 'í™”ì´íŠ¸', code: '#FFFFFF' },
                { name: 'ì´ˆë¡', code: '#4CAF50' },
                { name: 'ë¯¼íŠ¸', code: '#00C896' },
                { name: 'í•˜ëŠ˜', code: '#87CEEB' }
            ],
            18: [
                { name: 'ë¯¼íŠ¸', code: '#00C896' },
                { name: 'í•˜ëŠ˜', code: '#87CEEB' },
                { name: 'í™”ì´íŠ¸', code: '#FFFFFF' },
                { name: 'ê³¨ë“œ', code: '#FFD700' }
            ],
            19: [
                { name: 'ë¸”ë™', code: '#000000' }
            ],
            20: [
                { name: 'í™”ì´íŠ¸', code: '#FFFFFF' },
                { name: 'ë¶„í™', code: '#FF69B4' },
                { name: 'íŒŒë‘', code: '#2196F3' }
            ],
            21: [
                { name: 'ë¶„í™', code: '#FF69B4' },
                { name: 'í™”ì´íŠ¸', code: '#FFFFFF' },
                { name: 'ì´ˆë¡', code: '#4CAF50' }
            ]
        };

        const chosungDatabase = {
            2: { chosung: ['ã„±', 'ã„´', 'ã…‡'], special: ['ë¬¼'] },
            3: { chosung: ['ã„´', 'ã„·', 'ã…', 'ã…‚'], special: ['ì–¸ë•'] },
            4: { chosung: ['ã„·', 'ã……'], special: [] },
            5: { chosung: ['ã„·', 'ã…‚'], special: [] },
            6: { chosung: ['ã„±', 'ã„´', 'ã…‡'], special: [] },
            7: { chosung: ['ã„·', 'ã…ˆ'], special: [] },
            8: { chosung: ['ã„±', 'ã…‚', 'ã……'], special: ['ì¤‘ì•™'] },
            9: { chosung: ['ã……', 'ã…‡', 'ã…ˆ', 'ã…'], special: ['ë¶ìª½'] },
            10: { chosung: ['ã„´'], special: [] },
            11: { chosung: ['ã„±', 'ã„´', 'ã…‚', 'ã……'], special: [] }
        };

        const regionDatabase = {
            'ã„±': {
                'ì„œìš¸': ['ê°•ë‚¨êµ¬', 'ê°•ë™êµ¬', 'ê°•ë¶êµ¬', 'ê°•ì„œêµ¬', 'ê´€ì•…êµ¬', 'ê´‘ì§„êµ¬', 'êµ¬ë¡œêµ¬', 'ê¸ˆì²œêµ¬'],
                'ê²½ê¸°ë„': ['ê³ ì–‘ì‹œ', 'êµ¬ë¦¬ì‹œ', 'êµ°í¬ì‹œ', 'ê¹€í¬ì‹œ', 'ê´‘ëª…ì‹œ', 'ê³¼ì²œì‹œ', 'ê´‘ì£¼ì‹œ'],
                'ê°•ì›ë„': ['ê°•ë¦‰ì‹œ', 'ê³ ì„±êµ°'],
                'ê²½ìƒë„': ['ê²½ì£¼ì‹œ', 'ê±°ì œì‹œ', 'ê¹€í•´ì‹œ', 'ê¹€ì²œì‹œ', 'ê±°ì°½êµ°', 'ê³ ë ¹êµ°', 'ê³ ì„±êµ°', 'êµ¬ë¯¸ì‹œ'],
                'ì „ë¼ë„': ['ê´‘ì£¼ê´‘ì—­ì‹œ', 'ê³ ì°½êµ°', 'ê³¡ì„±êµ°', 'êµ¬ë¡€êµ°', 'ê¹€ì œì‹œ'],
                'ì¶©ì²­ë„': ['ê³µì£¼ì‹œ', 'ê¸ˆì‚°êµ°', 'ê³„ë£¡ì‹œ']
            },
            'ã„´': {
                'ì„œìš¸': ['ë…¸ì›êµ¬'],
                'ê²½ê¸°ë„': ['ë‚¨ì–‘ì£¼ì‹œ'],
                'ì „ë¼ë„': ['ë‚˜ì£¼ì‹œ', 'ë‚¨ì›ì‹œ'],
                'ì¶©ì²­ë„': ['ë…¼ì‚°ì‹œ']
            },
            'ã„·': {
                'ì„œìš¸': ['ë™ëŒ€ë¬¸êµ¬', 'ë™ì‘êµ¬', 'ë„ë´‰êµ¬'],
                'ê²½ê¸°ë„': ['ë™ë‘ì²œì‹œ'],
                'ê°•ì›ë„': ['ë™í•´ì‹œ'],
                'ê²½ìƒë„': ['ëŒ€êµ¬ê´‘ì—­ì‹œ', 'ëŒ€êµ¬ ë™êµ¬', 'ëŒ€êµ¬ ë‹¬ì„œêµ¬'],
                'ì¶©ì²­ë„': ['ëŒ€ì „ê´‘ì—­ì‹œ', 'ë‹¹ì§„ì‹œ', 'ë‹¨ì–‘êµ°']
            },
            'ã…': {
                'ì„œìš¸': ['ë§ˆí¬êµ¬'],
                'ì „ë¼ë„': ['ëª©í¬ì‹œ', 'ë¬´ì•ˆêµ°', 'ë¬´ì£¼êµ°'],
                'ê²½ìƒë„': ['ë¬¸ê²½ì‹œ', 'ë°€ì–‘ì‹œ', 'ë§ˆì‚°ì‹œ']
            },
            'ã…‚': {
                'ê²½ìƒë„': ['ë¶€ì‚°ê´‘ì—­ì‹œ', 'ë¶€ì‚° ë¶êµ¬', 'ë¶€ì‚° ë¶€ì‚°ì§„êµ¬', 'ë¶€ì‚° ì‚¬í•˜êµ¬', 'ë´‰í™”êµ°'],
                'ê²½ê¸°ë„': ['ë¶€ì²œì‹œ', 'ë¶„ë‹¹êµ¬'],
                'ì¶©ì²­ë„': ['ë³´ë ¹ì‹œ', 'ë¶€ì—¬êµ°', 'ë³´ì€êµ°']
            },
            'ã……': {
                'ì„œìš¸': ['ì„œëŒ€ë¬¸êµ¬', 'ì„œì´ˆêµ¬', 'ì„±ë™êµ¬', 'ì„±ë¶êµ¬', 'ì†¡íŒŒêµ¬'],
                'ê²½ê¸°ë„': ['ìˆ˜ì›ì‹œ', 'ì„±ë‚¨ì‹œ', 'ì‹œí¥ì‹œ', 'ì‚°ë³¸', 'ìˆ˜ì§€êµ¬'],
                'ê°•ì›ë„': ['ì†ì´ˆì‹œ', 'ì‚¼ì²™ì‹œ', 'ì„¤ì•…ì‚°'],
                'ê²½ìƒë„': ['ìƒì£¼ì‹œ', 'ì‚¬ì²œì‹œ', 'ì‚°ì²­êµ°'],
                'ì¶©ì²­ë„': ['ì„œì‚°ì‹œ', 'ì„œì²œêµ°'],
                'ì „ë¼ë„': ['ìˆœì²œì‹œ', 'ìˆœì°½êµ°']
            },
            'ã…‡': {
                'ì„œìš¸': ['ìš©ì‚°êµ¬', 'ì–‘ì²œêµ¬', 'ì˜ë“±í¬êµ¬', 'ì€í‰êµ¬'],
                'ê²½ê¸°ë„': ['ìš©ì¸ì‹œ', 'ì˜ì •ë¶€ì‹œ', 'ì•ˆì–‘ì‹œ', 'ì•ˆì‚°ì‹œ', 'ì•ˆì„±ì‹œ', 'ì˜ì™•ì‹œ', 'ì–‘í‰êµ°', 'ì–‘ì£¼ì‹œ', 'ì—¬ì£¼ì‹œ', 'ì—°ì²œêµ°', 'ì˜¤ì‚°ì‹œ'],
                'ê°•ì›ë„': ['ì›ì£¼ì‹œ', 'ì–‘êµ¬êµ°', 'ì–‘ì–‘êµ°', 'ì˜ì›”êµ°', 'ì¸ì œêµ°'],
                'ê²½ìƒë„': ['ìš¸ì‚°ê´‘ì—­ì‹œ', 'ìš¸ì§„êµ°', 'ì˜ì²œì‹œ', 'ì˜ë•êµ°', 'ì˜ì–‘êµ°', 'ì˜ì£¼ì‹œ', 'ì˜ˆì²œêµ°', 'ì˜ë ¹êµ°', 'ì˜ì„±êµ°'],
                'ì „ë¼ë„': ['ì—¬ìˆ˜ì‹œ', 'ìµì‚°ì‹œ', 'ì˜ê´‘êµ°', 'ì˜ì•”êµ°', 'ì™„ì£¼êµ°'],
                'ì¶©ì²­ë„': ['ì•„ì‚°ì‹œ', 'ì˜ˆì‚°êµ°', 'ì—°ê¸°êµ°', 'ì˜ë™êµ°', 'ì˜¥ì²œêµ°', 'ìŒì„±êµ°'],
                'ê¸°íƒ€': ['ì¸ì²œê´‘ì—­ì‹œ', 'ì¸ì²œ ì—°ìˆ˜êµ¬', 'ì¸ì²œ ì˜¹ì§„êµ°']
            },
            'ã…ˆ': {
                'ì„œìš¸': ['ì¢…ë¡œêµ¬', 'ì¤‘êµ¬', 'ì¤‘ë‘êµ¬'],
                'ì „ë¼ë„': ['ì „ì£¼ì‹œ', 'ì§„ì£¼ì‹œ', 'ì •ìì‹œ', 'ì¥ìˆ˜êµ°', 'ì¥ì„±êµ°', 'ì¥í¥êµ°', 'ì§„ë„êµ°', 'ì§„ì•ˆêµ°'],
                'ì¶©ì²­ë„': ['ì œì²œì‹œ', 'ì¦í‰êµ°', 'ì§„ì²œêµ°', 'ì²­ì–‘êµ°', 'ì²­ì£¼ì‹œ'],
                'ê²½ìƒë„': ['ì§„í•´ì‹œ', 'ì°½ì›ì‹œ', 'ì°½ë…•êµ°'],
                'ê°•ì›ë„': ['ì •ì„ êµ°', 'ì² ì›êµ°']
            },
            'ã…': {
                'ê²½ê¸°ë„': ['í™”ì„±ì‹œ', 'í•˜ë‚¨ì‹œ'],
                'ì¶©ì²­ë„': ['í™ì„±êµ°', 'í™ì²œêµ°'],
                'ê²½ìƒë„': ['í•©ì²œêµ°', 'í•˜ë™êµ°', 'í•¨ì•ˆêµ°', 'í•¨ì–‘êµ°'],
                'ì „ë¼ë„': ['í•´ë‚¨êµ°', 'í™”ìˆœêµ°', 'í•¨í‰êµ°'],
                'ê°•ì›ë„': ['í™ì²œêµ°', 'í™”ì²œêµ°', 'íš¡ì„±êµ°']
            }
        };

        const waterRegions = ['ê°•ë‚¨êµ¬', 'ê°•ë™êµ¬', 'ê°•ë¶êµ¬', 'ê°•ì„œêµ¬', 'ê°•ë¦‰ì‹œ', 'ê°•í™”êµ°', 'í•œê°•', 'ë‚™ë™ê°•', 'ê¸ˆê°•', 'ì˜ì‚°ê°•', 'ì„¬ì§„ê°•', 'í•´ìš´ëŒ€êµ¬', 'í•´ë‚¨êµ°'];
        const centerRegions = ['ì¤‘êµ¬', 'ì¤‘ë‘êµ¬', 'ì¤‘ì›êµ¬', 'ì¤‘ì•™ë™', 'ì¤‘ì•™ë¡œ'];
        const northRegions = ['ë¶êµ¬', 'ë¶í•œì‚°', 'ê°•ë¶êµ¬', 'ë¶ë©´', 'ë¶ë¶€'];
        const fortuneLuckyNumbers = [1, 3, 4, 5, 6, 7, 10, 11, 14, 17, 19, 21];

        // ì‚¬ì£¼ë²ˆí˜¸ ê´€ë ¨ ì½”ë“œ
        const sajuScores = {
            1: { money: 85, love: 95, work: 80, health: 70, social: 90, creative: 85 },
            2: { money: 75, love: 60, work: 90, health: 75, social: 70, creative: 65 },
            3: { money: 80, love: 85, work: 75, health: 65, social: 85, creative: 90 },
            4: { money: 90, love: 65, work: 95, health: 80, social: 70, creative: 60 },
            5: { money: 70, love: 80, work: 85, health: 70, social: 80, creative: 75 },
            6: { money: 75, love: 95, work: 70, health: 60, social: 95, creative: 95 },
            7: { money: 85, love: 90, work: 85, health: 75, social: 80, creative: 70 },
            8: { money: 75, love: 75, work: 80, health: 85, social: 75, creative: 65 },
            9: { money: 80, love: 70, work: 85, health: 70, social: 65, creative: 85 },
            10: { money: 85, love: 90, work: 80, health: 65, social: 90, creative: 80 },
            11: { money: 80, love: 70, work: 90, health: 75, social: 75, creative: 70 },
            12: { money: 70, love: 75, work: 75, health: 60, social: 80, creative: 95 },
            13: { money: 85, love: 80, work: 85, health: 70, social: 75, creative: 75 },
            14: { money: 80, love: 90, work: 80, health: 70, social: 85, creative: 70 },
            15: { money: 65, love: 70, work: 65, health: 55, social: 85, creative: 90 },
            16: { money: 75, love: 75, work: 80, health: 65, social: 70, creative: 60 },
            17: { money: 90, love: 95, work: 85, health: 80, social: 95, creative: 90 },
            18: { money: 70, love: 65, work: 75, health: 60, social: 60, creative: 80 },
            19: { money: 85, love: 85, work: 85, health: 75, social: 75, creative: 85 },
            20: { money: 80, love: 85, work: 90, health: 70, social: 80, creative: 85 },
            21: { money: 90, love: 90, work: 90, health: 80, social: 90, creative: 85 }
        };

        let animationId = null;
        let currentValues = [0, 0, 0, 0, 0, 0];
        let targetValues = [0, 0, 0, 0, 0, 0];

        function drawRadarChart(canvas, data, labels, animated = true) {
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) - 100;
            const angleStep = (Math.PI * 2) / labels.length;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Background decoration
            ctx.save();
            const bgGradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, radius * 1.2);
            bgGradient.addColorStop(0, 'rgba(72, 207, 203, 0.02)');
            bgGradient.addColorStop(0.5, 'rgba(255, 107, 157, 0.02)');
            bgGradient.addColorStop(1, 'transparent');
            ctx.fillStyle = bgGradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.restore();

            // Draw grid with gradient
            for (let i = 5; i >= 1; i--) {
                ctx.save();
                const gridGradient = ctx.createLinearGradient(centerX - radius, centerY, centerX + radius, centerY);
                gridGradient.addColorStop(0, `rgba(255, 107, 157, ${0.05 + (0.02 * (6 - i))})`);
                gridGradient.addColorStop(0.5, `rgba(72, 207, 203, ${0.05 + (0.02 * (6 - i))})`);
                gridGradient.addColorStop(1, `rgba(254, 87, 87, ${0.05 + (0.02 * (6 - i))})`);
                
                ctx.strokeStyle = gridGradient;
                ctx.lineWidth = 1.5;
                ctx.beginPath();
                for (let j = 0; j < labels.length; j++) {
                    const angle = j * angleStep - Math.PI / 2;
                    const x = centerX + Math.cos(angle) * radius * (i / 5);
                    const y = centerY + Math.sin(angle) * radius * (i / 5);
                    if (j === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.closePath();
                ctx.stroke();
                ctx.restore();

                // Scale numbers
                if (i % 2 === 1) {
                    ctx.fillStyle = '#94a3b8';
                    ctx.font = '13px "Noto Sans KR"';
                    ctx.textAlign = 'center';
                    ctx.fillText((i * 20).toString(), centerX + 5, centerY - radius * (i / 5) + 5);
                }
            }

            // Draw axes with gradient
            for (let i = 0; i < labels.length; i++) {
                const angle = i * angleStep - Math.PI / 2;
                
                ctx.save();
                const axisGradient = ctx.createLinearGradient(centerX, centerY, 
                    centerX + Math.cos(angle) * radius, 
                    centerY + Math.sin(angle) * radius);
                axisGradient.addColorStop(0, 'rgba(72, 207, 203, 0.2)');
                axisGradient.addColorStop(1, 'rgba(255, 107, 157, 0.1)');
                
                ctx.strokeStyle = axisGradient;
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(
                    centerX + Math.cos(angle) * radius,
                    centerY + Math.sin(angle) * radius
                );
                ctx.stroke();
                ctx.restore();
            }

            // Draw labels with background
            ctx.fillStyle = '#334155';
            ctx.font = 'bold 15px "Noto Sans KR"';
            
            for (let i = 0; i < labels.length; i++) {
                const angle = i * angleStep - Math.PI / 2;
                const x = centerX + Math.cos(angle) * (radius + 50);
                const y = centerY + Math.sin(angle) * (radius + 50);
                
                // Label background
                ctx.save();
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                const metrics = ctx.measureText(labels[i]);
                const padding = 8;
                ctx.fillRect(x - metrics.width/2 - padding, y - 10 - padding, 
                    metrics.width + padding*2, 20 + padding);
                ctx.restore();
                
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(labels[i], x, y);
            }

            // Animate values
            if (animated) {
                for (let i = 0; i < currentValues.length; i++) {
                    currentValues[i] += (targetValues[i] - currentValues[i]) * 0.12;
                }
            } else {
                currentValues = [...data];
            }

            // Draw data area with multiple gradients
            ctx.save();
            const dataGradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, radius);
            dataGradient.addColorStop(0, 'rgba(72, 207, 203, 0.3)');
            dataGradient.addColorStop(0.5, 'rgba(255, 107, 157, 0.25)');
            dataGradient.addColorStop(1, 'rgba(254, 87, 87, 0.2)');
            
            ctx.fillStyle = dataGradient;
            
            ctx.beginPath();
            for (let i = 0; i < currentValues.length; i++) {
                const angle = i * angleStep - Math.PI / 2;
                const value = currentValues[i] / 100;
                const x = centerX + Math.cos(angle) * radius * value;
                const y = centerY + Math.sin(angle) * radius * value;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.closePath();
            ctx.fill();
            
            // Draw outline with gradient
            const outlineGradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            outlineGradient.addColorStop(0, '#FF6B9D');
            outlineGradient.addColorStop(0.5, '#48CFCB');
            outlineGradient.addColorStop(1, '#FE5757');
            
            ctx.strokeStyle = outlineGradient;
            ctx.lineWidth = 3;
            ctx.stroke();
            ctx.restore();

            // Draw points with glow effect
            for (let i = 0; i < currentValues.length; i++) {
                const angle = i * angleStep - Math.PI / 2;
                const value = currentValues[i] / 100;
                const x = centerX + Math.cos(angle) * radius * value;
                const y = centerY + Math.sin(angle) * radius * value;
                
                // Glow effect
                ctx.save();
                const glowGradient = ctx.createRadialGradient(x, y, 0, x, y, 20);
                glowGradient.addColorStop(0, 'rgba(72, 207, 203, 0.3)');
                glowGradient.addColorStop(1, 'transparent');
                ctx.fillStyle = glowGradient;
                ctx.fillRect(x - 20, y - 20, 40, 40);
                ctx.restore();
                
                // White background
                ctx.fillStyle = '#ffffff';
                ctx.beginPath();
                ctx.arc(x, y, 10, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = 'rgba(0, 0, 0, 0.1)';
                ctx.lineWidth = 1;
                ctx.stroke();
                
                // Colored point
                const pointGradient = ctx.createRadialGradient(x, y, 0, x, y, 7);
                pointGradient.addColorStop(0, '#48CFCB');
                pointGradient.addColorStop(1, '#FF6B9D');
                ctx.fillStyle = pointGradient;
                ctx.beginPath();
                ctx.arc(x, y, 6, 0, Math.PI * 2);
                ctx.fill();
                
                // Value label with background
                ctx.save();
                ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
                ctx.fillRect(x + 12, y - 12, 28, 20);
                
                ctx.fillStyle = '#334155';
                ctx.font = 'bold 13px "Noto Sans KR"';
                ctx.fillText(Math.round(currentValues[i]), x + 26, y);
                ctx.restore();
            }

            // Continue animation
            if (animated && Math.abs(currentValues[0] - targetValues[0]) > 0.1) {
                animationId = requestAnimationFrame(() => drawRadarChart(canvas, data, labels, animated));
            }
        }

        function updateSajuStats(avgScores, labels) {
            const container = document.getElementById('statsContainer');
            container.innerHTML = '';
            
            avgScores.forEach((score, index) => {
                const statItem = document.createElement('div');
                statItem.className = 'saju-stat-item';
                statItem.innerHTML = `
                    <div class="saju-stat-label">${labels[index]}</div>
                    <div class="saju-stat-value">${score}ì </div>
                `;
                container.appendChild(statItem);
            });
        }

        function generateSajuChart() {
            const num1 = parseInt(document.getElementById('num1').value) || 20;
            const num2 = parseInt(document.getElementById('num2').value) || 4;
            const num3 = parseInt(document.getElementById('num3').value) || 8;
            const num4 = parseInt(document.getElementById('num4').value) || 10;

            if (!num1 || !num2 || !num3 || !num4) {
                alert('ëª¨ë“  ì‚¬ì£¼ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }

            const scores1 = sajuScores[num1] || sajuScores[1];
            const scores2 = sajuScores[num2] || sajuScores[1];
            const scores3 = sajuScores[num3] || sajuScores[1];
            const scores4 = sajuScores[num4] || sajuScores[1];

            const avgScores = [
                Math.round((scores1.money + scores2.money + scores3.money + scores4.money) / 4),
                Math.round((scores1.love + scores2.love + scores3.love + scores4.love) / 4),
                Math.round((scores1.work + scores2.work + scores3.work + scores4.work) / 4),
                Math.round((scores1.health + scores2.health + scores3.health + scores4.health) / 4),
                Math.round((scores1.social + scores2.social + scores3.social + scores4.social) / 4),
                Math.round((scores1.creative + scores2.creative + scores3.creative + scores4.creative) / 4)
            ];

            const labels = ['ì¬ë¬¼ìš´', 'ì• ì •ìš´', 'ì§ì¥ìš´', 'ê±´ê°•ìš´', 'ëŒ€ì¸ê´€ê³„', 'ì°½ì˜ì„±'];
            
            targetValues = [...avgScores];
            
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            
            const canvas = document.getElementById('radarChart');
            drawRadarChart(canvas, avgScores, labels, true);

            const totalScore = avgScores.reduce((a, b) => a + b, 0);
            const avgTotal = Math.round(totalScore / 6);
            document.getElementById('resultText').innerHTML = `ì¢…í•© ì ìˆ˜: <span>${avgTotal}ì </span>`;
            
            updateSajuStats(avgScores, labels);
            
            // í–‰ìš´ ë¶„ì„ ì‹¤í–‰
            analyzeFortune(num1, num2, num3, num4);
        }

        // ì‚¬ì£¼ í–‰ìš´ ë¶„ì„ í…ìŠ¤íŠ¸ ë³µì‚¬ í•¨ìˆ˜
        function copySajuFortuneText() {
            const fortuneSection = document.getElementById('fortuneAnalysisSection');
            if (!fortuneSection || fortuneSection.style.display === 'none') {
                alert('í–‰ìš´ ë¶„ì„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ì‚¬ì£¼ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ê³  ë¶„ì„ì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // í…ìŠ¤íŠ¸ í˜•íƒœë¡œ ë³€í™˜
            let text = generateSajuFortuneText();
            
            // í´ë¦½ë³´ë“œì— ë³µì‚¬
            navigator.clipboard.writeText(text).then(() => {
                // ë³µì‚¬ ì™„ë£Œ ë©”ì‹œì§€ í‘œì‹œ
                const status = document.getElementById('sajuFortuneCopyStatus');
                status.style.display = 'inline-block';
                setTimeout(() => {
                    status.style.display = 'none';
                }, 2000);
            }).catch(err => {
                // ë³µì‚¬ ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ ë°©ë²•
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                const status = document.getElementById('sajuFortuneCopyStatus');
                status.style.display = 'inline-block';
                setTimeout(() => {
                    status.style.display = 'none';
                }, 2000);
            });
        }

        // ì‚¬ì£¼ í–‰ìš´ ë¶„ì„ í…ìŠ¤íŠ¸ ìƒì„± í•¨ìˆ˜
        function generateSajuFortuneText() {
            const num1 = parseInt(document.getElementById('num1').value) || 20;
            const num2 = parseInt(document.getElementById('num2').value) || 4;
            const num3 = parseInt(document.getElementById('num3').value) || 8;
            const num4 = parseInt(document.getElementById('num4').value) || 10;
            const currentDate = new Date().toLocaleDateString('ko-KR');
            
            let text = `ğŸŒŸ ì‚¬ì£¼ë²ˆí˜¸ í–‰ìš´ ë¶„ì„ ê²°ê³¼
ìƒì„±ì¼: ${currentDate}
ì…ë ¥ ì‚¬ì£¼ë²ˆí˜¸: ${num1}, ${num2} / ${num3}, ${num4}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ° í–‰ìš´ì˜ ìˆ«ì

`;

            // í–‰ìš´ì˜ ìˆ«ì ìƒì„±
            const specialNumbers = [num1, num2, num3, num4];
            const allLuckyNumbers = [...new Set([...specialNumbers, ...fortuneLuckyNumbers])].sort((a, b) => a - b);
            
            text += `ë‹¹ì‹ ì˜ í–‰ìš´ì˜ ìˆ«ìë“¤:
${allLuckyNumbers.join(', ')}

ì„¤ëª…:
ì‚¬ì£¼ë²ˆí˜¸ ${num1}, ${num2} / ${num3}, ${num4}ì˜ ê¸°ìš´ê³¼ ì¡°í™”ë¥¼ ì´ë£¨ëŠ” í–‰ìš´ì˜ ìˆ«ìë“¤ì…ë‹ˆë‹¤. ì´ ìˆ«ìë“¤ì€ ì¼ìƒìƒí™œì—ì„œ ì¢‹ì€ ê¸°ìš´ì„ ê°€ì ¸ë‹¤ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í™œìš©ë²•:
â€¢ ë¡œë˜ ë²ˆí˜¸ ì„ íƒ ì‹œ ì°¸ê³ 
â€¢ ì¤‘ìš”í•œ ë‚ ì§œë‚˜ ì‹œê°„ ì„ íƒ ì‹œ í™œìš©
â€¢ íœ´ëŒ€í° ë²ˆí˜¸, ìë™ì°¨ ë²ˆí˜¸ ë“±ì— í™œìš©
â€¢ ë¹„ë°€ë²ˆí˜¸ë‚˜ ì¤‘ìš”í•œ ìˆ«ì ì¡°í•©ì— í¬í•¨

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ¨ í–‰ìš´ì˜ ìƒ‰ìƒ

`;

            // í–‰ìš´ì˜ ìƒ‰ìƒ ìƒì„±
            const colors1 = colorDatabase[num1] || [];
            const colors2 = colorDatabase[num2] || [];
            const colors3 = colorDatabase[num3] || [];
            const colors4 = colorDatabase[num4] || [];
            
            const colorMap = new Map();
            [...colors1, ...colors2, ...colors3, ...colors4].forEach(color => {
                colorMap.set(color.name, color);
            });
            
            const allColors = Array.from(colorMap.values());
            if (allColors.length === 0) {
                allColors.push({ name: 'í™”ì´íŠ¸', code: '#FFFFFF' });
            }
            
            text += `ë‹¹ì‹ ì˜ í–‰ìš´ì˜ ìƒ‰ìƒë“¤:
${allColors.map(color => `â€¢ ${color.name}`).join('\n')}

ì„¤ëª…:
ì´ ìƒ‰ìƒë“¤ì€ ë‹¹ì‹ ì˜ ì‚¬ì£¼ ê¸°ìš´ì„ ê°•í™”ì‹œì¼œì£¼ëŠ” í–‰ìš´ì˜ ìƒ‰ìƒì…ë‹ˆë‹¤. ì˜ìƒ, ì†Œí’ˆ, ì¸í…Œë¦¬ì–´ ë“±ì— í™œìš©í•˜ë©´ ì¢‹ì€ ê¸°ìš´ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í™œìš©ë²•:
â€¢ ì¤‘ìš”í•œ ë‚  ì°©ìš©í•  ì˜ìƒ ìƒ‰ìƒìœ¼ë¡œ ì„ íƒ
â€¢ ì§‘ì´ë‚˜ ì‚¬ë¬´ì‹¤ ì¸í…Œë¦¬ì–´ì— í¬ì¸íŠ¸ ì»¬ëŸ¬ë¡œ í™œìš©
â€¢ ì§€ê°‘, í•¸ë“œí° ì¼€ì´ìŠ¤ ë“± ì†Œí’ˆ ìƒ‰ìƒìœ¼ë¡œ ì„ íƒ
â€¢ ìë™ì°¨ ìƒ‰ìƒì´ë‚˜ ì•¡ì„¸ì„œë¦¬ì— í™œìš©

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“ ì¶”ì²œ ì§€ì—­

`;

            // ì¶”ì²œ ì§€ì—­ ìƒì„±
            const data1 = chosungDatabase[num1] || { chosung: [], special: [] };
            const data2 = chosungDatabase[num2] || { chosung: [], special: [] };
            const data3 = chosungDatabase[num3] || { chosung: [], special: [] };
            const data4 = chosungDatabase[num4] || { chosung: [], special: [] };
            
            const allChosung = [...new Set([...data1.chosung, ...data2.chosung, ...data3.chosung, ...data4.chosung])];
            const allSpecial = [...new Set([...data1.special, ...data2.special, ...data3.special, ...data4.special])];
            
            text += `ë‹¹ì‹ ê³¼ ì¡°í™”ë¥¼ ì´ë£¨ëŠ” ì´ˆì„±:
${allChosung.length > 0 ? allChosung.join(', ') : 'í•´ë‹¹ ì—†ìŒ'}

`;

            if (allSpecial.length > 0) {
                text += `íŠ¹ë³„ í‚¤ì›Œë“œ:
${allSpecial.join(', ')} ê´€ë ¨ ì§€ì—­ì´ íŠ¹íˆ ì¢‹ìŠµë‹ˆë‹¤.

`;
            }

            // ì¹´í…Œê³ ë¦¬ë³„ ì§€ì—­ ì •ë¦¬
            const categorizedRegions = {};
            
            allChosung.forEach(cho => {
                if (regionDatabase[cho]) {
                    Object.entries(regionDatabase[cho]).forEach(([category, regions]) => {
                        if (!categorizedRegions[category]) {
                            categorizedRegions[category] = [];
                        }
                        categorizedRegions[category] = [...categorizedRegions[category], ...regions];
                    });
                }
            });

            text += `ì¶”ì²œ ì§€ì—­ ëª©ë¡:

`;

            Object.entries(categorizedRegions).forEach(([category, regions]) => {
                const uniqueRegions = [...new Set(regions)].sort();
                
                text += `ã€${category}ã€‘
`;
                
                // íŠ¹ë³„ ì§€ì—­ ì²´í¬í•˜ì—¬ í‘œì‹œ
                uniqueRegions.forEach(region => {
                    let isSpecial = false;
                    let specialMark = '';
                    
                    if (allSpecial.includes('ë¬¼') && waterRegions.some(w => region.includes(w))) {
                        isSpecial = true;
                        specialMark = ' â­(ë¬¼ ê´€ë ¨)';
                    } else if (allSpecial.includes('ì¤‘ì•™') && centerRegions.some(c => region.includes(c))) {
                        isSpecial = true;
                        specialMark = ' â­(ì¤‘ì•™ ê´€ë ¨)';
                    } else if (allSpecial.includes('ë¶ìª½') && northRegions.some(n => region.includes(n))) {
                        isSpecial = true;
                        specialMark = ' â­(ë¶ìª½ ê´€ë ¨)';
                    }
                    
                    text += `â€¢ ${region}${specialMark}
`;
                });
                
                text += `
`;
            });

            text += `ì„¤ëª…:
ìœ„ì˜ ì´ˆì„±ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ì§€ì—­ë“¤ì€ ë‹¹ì‹ ì˜ ì‚¬ì£¼ ê¸°ìš´ê³¼ ì¡°í™”ë¥¼ ì´ë£¨ì–´ ì¢‹ì€ ê¸°ìš´ì„ ê°€ì ¸ë‹¤ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;

            if (allSpecial.length > 0) {
                text += ` íŠ¹ë³„íˆ "${allSpecial.join(', ')}"ê³¼ ê´€ë ¨ëœ ì§€ì—­(â­í‘œì‹œ)ì€ ë”ìš± ê°•í•œ ê¸°ìš´ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
            }

            text += `

í™œìš©ë²•:
â€¢ ì´ì‚¬ë‚˜ ì´ì§ ì‹œ ì§€ì—­ ì„ íƒ ì°¸ê³ 
â€¢ ì—¬í–‰ì§€ë‚˜ íœ´ì–‘ì§€ ì„ íƒ ì‹œ í™œìš©
â€¢ ì‚¬ì—…ì¥ì´ë‚˜ ë§¤ì¥ ìœ„ì¹˜ ì„ íƒ ì‹œ ê³ ë ¤
â€¢ íˆ¬ì ë¶€ë™ì‚° ì§€ì—­ ì„ íƒ ì‹œ ì°¸ê³ 

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¡ ì¢…í•© í™œìš© ê°€ì´ë“œ:

1. í–‰ìš´ì˜ ìˆ«ì: ì¼ìƒì˜ ì¤‘ìš”í•œ ì„ íƒì—ì„œ ì°¸ê³  ìˆ«ìë¡œ í™œìš©
2. í–‰ìš´ì˜ ìƒ‰ìƒ: ì˜ìƒ, ì¸í…Œë¦¬ì–´, ì†Œí’ˆ ì„ íƒ ì‹œ ìš°ì„  ê³ ë ¤
3. ì¶”ì²œ ì§€ì—­: ê±°ì£¼, ì‚¬ì—…, ì—¬í–‰ ë“±ì˜ ì¥ì†Œ ì„ íƒ ì‹œ ì°¸ê³ 

â€» ì´ ë¶„ì„ì€ ì‚¬ì£¼ë²ˆí˜¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì°¸ê³  ìë£Œì…ë‹ˆë‹¤.
â€» ì‹¤ì œ ê²°ì •ì€ ê°œì¸ì˜ ìƒí™©ê³¼ íŒë‹¨ì„ ì¢…í•©í•˜ì—¬ ë‚´ë¦¬ì‹œê¸° ë°”ëë‹ˆë‹¤.

ìƒì„±ì¼ì‹œ: ${new Date().toLocaleString('ko-KR')}`;

            return text;
        }

        // í–‰ìš´ ë¶„ì„ í•¨ìˆ˜
        function analyzeFortune(saju1, saju2, saju3, saju4) {
            // í–‰ìš´ì˜ ìˆ«ì í‘œì‹œ
            const luckyNumbersDiv = document.getElementById('fortuneLuckyNumbers');
            luckyNumbersDiv.innerHTML = '';
            
            const specialNumbers = [saju1, saju2, saju3, saju4];
            const allLuckyNumbers = [...new Set([...specialNumbers, ...fortuneLuckyNumbers])].sort((a, b) => a - b);
            
            allLuckyNumbers.forEach(num => {
                const div = document.createElement('div');
                div.className = 'fortune-number-item';
                div.textContent = num;
                luckyNumbersDiv.appendChild(div);
            });
            
            document.getElementById('fortuneNumberDescription').textContent = 
                `ì‚¬ì£¼ë²ˆí˜¸ ${saju1}, ${saju2} / ${saju3}, ${saju4}ì˜ ê¸°ìš´ê³¼ ì¡°í™”ë¥¼ ì´ë£¨ëŠ” í–‰ìš´ì˜ ìˆ«ìë“¤ì…ë‹ˆë‹¤. ì´ ìˆ«ìë“¤ì€ ì¼ìƒìƒí™œì—ì„œ ì¢‹ì€ ê¸°ìš´ì„ ê°€ì ¸ë‹¤ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
            
            // í–‰ìš´ì˜ ìƒ‰ìƒ í‘œì‹œ
            const colorSection = document.getElementById('fortuneColorSection');
            colorSection.innerHTML = '';
            
            const colors1 = colorDatabase[saju1] || [];
            const colors2 = colorDatabase[saju2] || [];
            const colors3 = colorDatabase[saju3] || [];
            const colors4 = colorDatabase[saju4] || [];
            
            // ìƒ‰ìƒ ì¤‘ë³µ ì œê±°
            const colorMap = new Map();
            [...colors1, ...colors2, ...colors3, ...colors4].forEach(color => {
                colorMap.set(color.name, color);
            });
            
            const allColors = Array.from(colorMap.values());
            
            if (allColors.length === 0) {
                allColors.push({ name: 'í™”ì´íŠ¸', code: '#FFFFFF' });
            }
            
            allColors.forEach(color => {
                const div = document.createElement('div');
                div.className = 'fortune-color-item';
                div.textContent = color.name;
                div.style.backgroundColor = color.code;
                
                if (color.name === 'í™”ì´íŠ¸') {
                    div.style.color = '#333';
                    div.style.border = '2px solid #ddd';
                } else if (color.name === 'ë¸”ë™') {
                    div.style.border = '2px solid #666';
                }
                
                colorSection.appendChild(div);
            });
            
            document.getElementById('fortuneColorDescription').textContent = 
                `ì´ ìƒ‰ìƒë“¤ì€ ë‹¹ì‹ ì˜ ì‚¬ì£¼ ê¸°ìš´ì„ ê°•í™”ì‹œì¼œì£¼ëŠ” í–‰ìš´ì˜ ìƒ‰ìƒì…ë‹ˆë‹¤. ì˜ìƒ, ì†Œí’ˆ, ì¸í…Œë¦¬ì–´ ë“±ì— í™œìš©í•˜ë©´ ì¢‹ì€ ê¸°ìš´ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
            
            // ì¶”ì²œ ì´ˆì„± í‘œì‹œ
            const chosungSection = document.getElementById('fortuneChosungSection');
            chosungSection.innerHTML = '';
            
            const data1 = chosungDatabase[saju1] || { chosung: [], special: [] };
            const data2 = chosungDatabase[saju2] || { chosung: [], special: [] };
            const data3 = chosungDatabase[saju3] || { chosung: [], special: [] };
            const data4 = chosungDatabase[saju4] || { chosung: [], special: [] };
            
            const allChosung = [...new Set([...data1.chosung, ...data2.chosung, ...data3.chosung, ...data4.chosung])];
            const allSpecial = [...new Set([...data1.special, ...data2.special, ...data3.special, ...data4.special])];
            
            allChosung.forEach(cho => {
                const div = document.createElement('div');
                div.className = 'fortune-chosung-item';
                div.textContent = cho;
                chosungSection.appendChild(div);
            });
            
            // ì¶”ì²œ ì§€ì—­ í‘œì‹œ
            const regionContainer = document.getElementById('fortuneRegionContainer');
            regionContainer.innerHTML = '';
            
            // ì¹´í…Œê³ ë¦¬ë³„ë¡œ ì§€ì—­ ì •ë¦¬
            const categorizedRegions = {};
            
            allChosung.forEach(cho => {
                if (regionDatabase[cho]) {
                    Object.entries(regionDatabase[cho]).forEach(([category, regions]) => {
                        if (!categorizedRegions[category]) {
                            categorizedRegions[category] = [];
                        }
                        categorizedRegions[category] = [...categorizedRegions[category], ...regions];
                    });
                }
            });
            
            // ì¤‘ë³µ ì œê±° ë° ì¹´í…Œê³ ë¦¬ë³„ í‘œì‹œ
            Object.entries(categorizedRegions).forEach(([category, regions]) => {
                const uniqueRegions = [...new Set(regions)].sort();
                
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'fortune-region-category';
                
                const titleDiv = document.createElement('div');
                titleDiv.className = 'fortune-region-category-title';
                titleDiv.textContent = category;
                categoryDiv.appendChild(titleDiv);
                
                const gridDiv = document.createElement('div');
                gridDiv.className = 'fortune-region-grid';
                
                uniqueRegions.forEach(region => {
                    const regionDiv = document.createElement('div');
                    regionDiv.className = 'fortune-region-item';
                    
                    // íŠ¹ë³„ ì§€ì—­ ì²´í¬
                    let isSpecial = false;
                    if (allSpecial.includes('ë¬¼') && waterRegions.some(w => region.includes(w))) {
                        isSpecial = true;
                    } else if (allSpecial.includes('ì¤‘ì•™') && centerRegions.some(c => region.includes(c))) {
                        isSpecial = true;
                    } else if (allSpecial.includes('ë¶ìª½') && northRegions.some(n => region.includes(n))) {
                        isSpecial = true;
                    }
                    
                    if (isSpecial) {
                        regionDiv.classList.add('fortune-special-region');
                        regionDiv.textContent = region + ' â­';
                    } else {
                        regionDiv.textContent = region;
                    }
                    
                    gridDiv.appendChild(regionDiv);
                });
                
                categoryDiv.appendChild(gridDiv);
                regionContainer.appendChild(categoryDiv);
            });
            
            let specialText = '';
            if (allSpecial.length > 0) {
                specialText = `\níŠ¹ë³„íˆ "${allSpecial.join(', ')}"ê³¼ ê´€ë ¨ëœ ì§€ì—­(â­í‘œì‹œ)ì€ ë”ìš± ê°•í•œ ê¸°ìš´ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
            }
            
            document.getElementById('fortuneRegionDescription').textContent = 
                `ìœ„ì˜ ì´ˆì„±ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ì§€ì—­ë“¤ì€ ë‹¹ì‹ ì˜ ì‚¬ì£¼ ê¸°ìš´ê³¼ ì¡°í™”ë¥¼ ì´ë£¨ì–´ ì¢‹ì€ ê¸°ìš´ì„ ê°€ì ¸ë‹¤ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.${specialText}`;
            
            // í–‰ìš´ ë¶„ì„ ì„¹ì…˜ í‘œì‹œ
            document.getElementById('fortuneAnalysisSection').style.display = 'block';
        }

        // ì—”í„°í‚¤ ì´ë²¤íŠ¸
        document.addEventListener('DOMContentLoaded', function() {
            // í•´ìš´ë²ˆí˜¸ ì…ë ¥ ì´ë²¤íŠ¸
            document.getElementById('haeun1').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') generateGraph();
            });
            
            document.getElementById('haeun2').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') generateGraph();
            });

            // ì‚¬ì£¼ë²ˆí˜¸ ì…ë ¥ ì´ë²¤íŠ¸
            document.querySelectorAll('.saju-input').forEach(input => {
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        generateSajuChart();
                    }
                });
            });

            // ì‚¬ì£¼ë²ˆí˜¸ ë¶„ì„ ì´ˆê¸° ì‹¤í–‰
            generateSajuChart();
        });
    </script>
</body>
</html> 